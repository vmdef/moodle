define(["jquery","core/config","core/str","mod_forum/selectors"],function(a,b,c,d){"use strict";function e(a){f(),"mod-forum-discuss"==a&&g()}function f(){var d=a(".comment-list.comments-loaded li");return!d.length||c.get_string("reportasspam","block_spam_deletion").then(function(c){d.each(function(d,e){var f=a(e);if(f.attr("id")){var g=f.attr("id").match(/comment-(\d+)-.*/);if(g){var h=g[1],i=f.find("div.no-overflow");if(i.length){var j=b.wwwroot+"/blocks/spam_deletion/reportspam.php?commentid="+h+"&returnurl="+encodeURIComponent(window.location.href),k='<div class="text-right mt-2 mb-1"><a href="'+j+'">'+c+"</a></div>";i.append(k)}}}})})}function g(){var e=a(d.post.post);return!e.length||c.get_string("reportasspam","block_spam_deletion").then(function(c){return e.each(function(e,f){var g=a(f).attr("data-post-id"),h=b.wwwroot+"/blocks/spam_deletion/reportspam.php?postid="+g,i='<a data-region="post-action" href="'+h+'" class="btn btn-link">'+c+"</a>",j=a(f).find(d.post.actionsContainer).first();j.length&&j.prepend(i)}),!0})}return{init:e}});