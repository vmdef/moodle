define(["jquery","core_user/repository","core/templates","core/notification"],function(a,b,c,d){var e=9,f={CARDDECK_CONTAINER:'[data-region="recent-activities-view"]',CARDDECK:'[data-region="recent-activities-view-content"]'},g=function(a,c){return b.getRecentActivities(a,c)},h=function(a,b){if(b.length>0)return c.render("block_recentactivities/view-cards",{activities:b});var d=a.attr("data-noactivitiesimg");return c.render("block_recentactivities/no-activities",{noactivitiesimg:d})},i=function(b,i){i=a(i);var j=i.find(f.CARDDECK_CONTAINER),k=i.find(f.CARDDECK),l=g(b,e);l.then(function(a){var b=h(j,a);return b.then(function(a,b){return c.replaceNodeContents(k,a,b)})["catch"](d.exception),l})["catch"](d.exception)};return{init:i}});