YUI.add("moodle-local_plugins-favourites",function(e,t){M.local_plugins=M.local_plugins||{},M.local_plugins.favourites={};var n=M.local_plugins.favourites;n.initparams={},n.init=function(t){var n;this.initparams=t,n=e.one(this.initparams.selectors.addlink),n&&(n.set("href","#"),n.on("click",this.addToFavourites,this))},n.addToFavourites=function(t){t.preventDefault(),e.use(["io-base","handlebars","json-parse"],function(e){e.io(n.initparams.urls.add,{on:{success:function(t,r){var i,s;try{s=e.JSON.parse(r.responseText)}catch(o){window.alert("Unable to parse server response");return}if(s.error){window.alert(s.error);return}s.count&&(i=e.one(n.initparams.selectors.container),i&&i.setHTML(e.Handlebars.render(n.initparams.templates.added,{count:s.count})))}}})})}},"@VERSION@",{requires:["base","node","event","io-base","json-parse","handlebars"]});
