define ("local_plugins/browser-control",["jquery","core/log"],function(a,b){'use strict';function c(a,b){var c=this;c.region=a;c.browserGrid=b;c.initFilterForm();c.initSortForm()}c.prototype.initFilterForm=function(){var a=this;a.filterForm=a.region.find("[data-widget=\"browser-filter-form\"]").first();if(!a.filterForm.length){b.error("Filter form widget not found");return}a.filterForm.on("submit",function(b){b.preventDefault();a.submitControlForm()});a.filterForm.find("select,input").on("change",function(){a.highlightCurrentlyUsedFields()});a.filterForm.find("select").on("change",function(){a.filterForm.submit()});a.filterForm.find("[data-widget=\"advanced-filter-hide\"]").on("click",function(b){b.preventDefault();a.filterForm.attr("data-show-advanced","")});a.filterForm.find("[data-widget=\"advanced-filter-show\"]").on("click",function(b){b.preventDefault();a.filterForm.attr("data-show-advanced","1")});a.highlightCurrentlyUsedFields()};c.prototype.initSortForm=function(){var c=this;c.sortForm=c.region.find("[data-widget=\"browser-sort-form\"]").first();if(!c.sortForm.length){b.error("Sort form widget not found");return}c.sortForm.find("[data-sortby]").on("click",function(b){b.preventDefault();var d=a(b.currentTarget);c.filterForm.find("input[name=\"sort-by\"]").val(d.attr("data-sortby"));c.highlightCurrentSortLink();c.submitControlForm()});c.highlightCurrentSortLink()};c.prototype.highlightCurrentSortLink=function(){var a=this,b=a.filterForm.find("input[name=\"sort-by\"]").val();a.sortForm.find("[data-sortby]").removeClass("current");a.sortForm.find("[data-sortby=\""+b+"\"]").addClass("current")};c.prototype.highlightCurrentlyUsedFields=function(){var b=this,c=b.filterForm.find("[data-widget=\"descriptor-dropdown\"],input[name=\"search\"]");c.removeClass("current");c.each(function(b,c){c=a(c);if(""!==c.val()){c.addClass("current");c.removeAttr("data-is-advanced")}})};c.prototype.submitControlForm=function(){var a=this,b=d(a.filterForm.serializeArray());a.browserGrid.search(b)};function d(b){var c="";a.each(b,function(a,b){if("search"===b.name){c+=" "+b.value}else if(""!==b.value){c+=" "+b.name+":"+b.value}});return c.trim()}return{init:function init(a,b){return new c(a,b)}}});
//# sourceMappingURL=browser-control.min.js.map
