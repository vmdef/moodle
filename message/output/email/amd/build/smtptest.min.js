define(["jquery","core/str","core/notification","core/modal_factory","core/ajax","core/templates"],function(a,b,c,d,e,f){function g(){var b={address:a("#id_s__smtpemailtest").val(),hosts:a("#id_s__smtphosts").val(),secure:a("#id_s__smtpsecure").val(),authtype:a("#id_s__smtpauthtype").val(),fromaddress:a("#id_s__noreplyaddress").val(),username:a("#id_s__smtpuser").val(),password:a("#id_s__smtppass").val()};return e.call([{methodname:"message_email_smtp_test",args:b}])[0].then(function(a){return a})}var h=function(){var e=d.create({type:d.types.DEFAULT});e.then(function(a){return a.show()}).fail(c.exception);var h=b.get_strings([{key:"smtpemailtestmodaltitle",component:"message_email"}]);a.when(h,e).then(function(b,c){c.setTitle(b[0]);var d=a.when(g()).then(function(a){var b={hosts:[]};return b.hosts=a,f.render("message_email/smtptest_output",b)});return c.setBody(d)}).fail(c.exception)};return{init:function(){a("#id_s__smtpemailtest_button").click(function(){new h})}}});