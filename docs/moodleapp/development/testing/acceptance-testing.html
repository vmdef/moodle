<!doctype html>
<html lang="en-AU" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-moodleapp/development/testing/acceptance-testing">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-L9EE8RW5B1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-L9EE8RW5B1",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Moodle Developer Resources" href="/devdocs/opensearch.xml">


<link rel="icon" href="/devdocs/img/icons/orange_m.svg">
<link rel="manifest" href="/devdocs/manifest.json">
<meta name="theme-color" content="rgb(208, 99, 0)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/devdocs/img/icons/maskable_icon.png">
<link rel="mask-icon" href="/devdocs/img/icons/maskable_icon.png" color="rgb(208, 99, 0)">
<meta name="msapplication-TileImage" content="/devdocs/img/icons/maskable_icon.png">
<meta name="msapplication-TileColor" content="#000"><title data-rh="true">Acceptance testing for the Moodle App | Moodle Developer Resources</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://moodledev.io/devdocs/docs/moodleapp/development/testing/acceptance-testing"><meta data-rh="true" name="docusaurus_locale" content="en-AU"><meta data-rh="true" name="docsearch:language" content="en-AU"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Acceptance testing for the Moodle App | Moodle Developer Resources"><meta data-rh="true" name="description" content="In order to run tests that carry out automated functionality testing for the Moodle App, you can write Acceptance tests. This can be useful if you want to test plugins that are compatible with the app, or you&#x27;re contributing to the app core. Behat tests for the app work the same way as tests for Moodle core, but they are not run as part of a normal Behat execution and there are some differences that we&#x27;ll go through in this page."><meta data-rh="true" property="og:description" content="In order to run tests that carry out automated functionality testing for the Moodle App, you can write Acceptance tests. This can be useful if you want to test plugins that are compatible with the app, or you&#x27;re contributing to the app core. Behat tests for the app work the same way as tests for Moodle core, but they are not run as part of a normal Behat execution and there are some differences that we&#x27;ll go through in this page."><link data-rh="true" rel="icon" href="/devdocs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://moodledev.io/devdocs/docs/moodleapp/development/testing/acceptance-testing"><link data-rh="true" rel="alternate" href="https://moodledev.io/devdocs/docs/moodleapp/development/testing/acceptance-testing" hreflang="en-AU"><link data-rh="true" rel="alternate" href="https://moodledev.io/devdocs/docs/moodleapp/development/testing/acceptance-testing" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://NNUY2D5GV2-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/devdocs/assets/css/styles.294a7229.css">
<link rel="preload" href="/devdocs/assets/js/runtime~main.108433aa.js" as="script">
<link rel="preload" href="/devdocs/assets/js/main.2dbacd86.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/devdocs/"><div class="navbar__logo"><img src="/devdocs/img/Moodle.svg" alt="Moodle Developer Resources" class="themedImage_ToTc themedImage--light_HNdA" height="35px" width="138px"><img src="/devdocs/img/Moodle.svg" alt="Moodle Developer Resources" class="themedImage_ToTc themedImage--dark_i4oU" height="35px" width="138px"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/devdocs/docs">Guides</a><a class="navbar__item navbar__link" href="/devdocs/general/community/contribute">Community</a><a class="navbar__item navbar__link" href="/devdocs/general/development/gettingstarted">Coding</a><a class="navbar__item navbar__link" href="/devdocs/general/development/process">Process</a></div><div class="navbar__items navbar__items--right"><div class="wrapper_Jz6K"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/devdocs/docs">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/devdocs/docs/guides">Developer guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Developer guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/devdocs/docs/apis">API guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;API guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/devdocs/docs/devupdate">Developer update</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/devdocs/docs/moodleapp">Moodle App</a><button aria-label="Toggle the collapsible sidebar category &#x27;Moodle App&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/devdocs/docs/moodleapp/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/devdocs/docs/moodleapp/accessibility">Accessibility</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/devdocs/docs/moodleapp/customisation">Customisation</a><button aria-label="Toggle the collapsible sidebar category &#x27;Customisation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/devdocs/docs/category/development">Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;Development&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/devdocs/docs/moodleapp/development/setup">Setting up your environment</a><button aria-label="Toggle the collapsible sidebar category &#x27;Setting up your environment&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/devdocs/docs/moodleapp/development/development-guide">Development guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/devdocs/docs/moodleapp/development/plugins-development-guide">Plugins development guide</a><button aria-label="Toggle the collapsible sidebar category &#x27;Plugins development guide&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/devdocs/docs/moodleapp/development/custom-push-notifications">Sending custom Push Notifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/devdocs/docs/moodleapp/development/deep-linking">Deep Linking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/devdocs/docs/moodleapp/development/network-debug">Debugging network requests</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/devdocs/docs/category/testing">Testing</a><button aria-label="Toggle the collapsible sidebar category &#x27;Testing&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/devdocs/docs/moodleapp/development/testing/acceptance-testing">Acceptance testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/devdocs/docs/moodleapp/development/testing/unit-testing">Unit testing</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/devdocs/docs/category/scripts">Scripts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Scripts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/devdocs/docs/moodleapp/development/release-process">Release process</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/devdocs/docs/moodleapp/faq">FAQ</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/devdocs/docs/category/upgrading-your-code">Upgrading your code</a><button aria-label="Toggle the collapsible sidebar category &#x27;Upgrading your code&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/devdocs/general/app_releases">Release notes</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/devdocs/general/releases/4.0">Release notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/devdocs/general/projects">Projects</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/devdocs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/devdocs/docs/moodleapp"><span itemprop="name">Moodle App</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/devdocs/docs/category/development"><span itemprop="name">Development</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/devdocs/docs/category/testing"><span itemprop="name">Testing</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Acceptance testing</span><meta itemprop="position" content="4"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: master</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Acceptance testing for the Moodle App</h1></header><p>In order to run tests that carry out automated functionality testing for the Moodle App, you can write <a href="https://docs.moodle.org/dev/Acceptance_testing" target="_blank" rel="noopener noreferrer">Acceptance tests</a>. This can be useful if you want to test plugins that are compatible with the app, or you&#x27;re contributing to the app core. Behat tests for the app work the same way as tests for Moodle core, but they are not run as part of a normal Behat execution and there are some differences that we&#x27;ll go through in this page.</p><p>A key point is that these tests are run using the Moodle Behat infrastructure, and don&#x27;t depend only on the app codebase. Therefore, you will need a Moodle development setup as described in <a href="/devdocs/general/development/gettingstarted">Setting up development environment</a>.</p><p>The main advantages of this approach are:</p><ul><li>It is easy for third-party plugin authors to create tests for app features in exactly the same way that they create tests for website features.</li><li>Where institutions run tests automatically, it should be relatively easy to include some app tests within the existing approach.</li><li>This system does not require any mobile device hardware and should work on all common platforms.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a class="hash-link" href="#installation" title="Direct link to heading">​</a></h2><p>In order to run tests for the app, you will need to run both a Moodle site and the Moodle App.</p><p>The Moodle site should be version 3.9.7+, 3.10.4+ or newer (3.11, 4.0, etc.). You also need to install the <a href="https://github.com/moodlehq/moodle-local_moodlemobileapp/" target="_blank" rel="noopener noreferrer">local_moodlemobileapp</a> plugin, using the version that corresponds with the version of the Moodle App that you&#x27;re testing on. If you have tests for an older version, you can read the <a href="#upgrading-tests-from-an-older-version">Upgrading tests from an older version</a> section.</p><p>We recommend that you use <a href="https://github.com/moodlehq/moodle-docker#use-containers-for-running-behat-tests-for-the-mobile-app" target="_blank" rel="noopener noreferrer">moodle-docker</a>, because it&#x27;s configured to run mobile tests and you can skip reading this entire section. You won&#x27;t even need to clone the app repository.</p><p>Nevertheless, if you still have to run the projects in your local machine, you can read the following instructions.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-moodle-site">Configuring the Moodle site<a class="hash-link" href="#configuring-the-moodle-site" title="Direct link to heading">​</a></h3><p>You can learn how to run a Moodle site locally in <a href="/devdocs/general/development/gettingstarted">Setting up development environment</a>.</p><p>Remember to install the <a href="https://github.com/moodlehq/moodle-local_moodlemobileapp/" target="_blank" rel="noopener noreferrer">local_moodlemobileapp</a> plugin with the same version that you&#x27;re using for the mobile app.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-moodle-app">Configuring the Moodle App<a class="hash-link" href="#configuring-the-moodle-app" title="Direct link to heading">​</a></h3><p>If you are going to modify the application code, you can learn how to run it locally in <a href="/devdocs/docs/moodleapp/development/setup">Setting up your development environment for the Moodle App</a>. You only need to run the application in a browser, so you can skip the instructions for Android/iOS. Make sure to launch the application on the testing environment, running <code>npm run serve:test</code>.</p><p>If you only intend to run the app with the goal of executing Behat tests, you can use <a href="/devdocs/docs/moodleapp/development/setup/docker-images">the Docker images for the Mobile App</a>. Again, make sure that you&#x27;re running them on the testing environment using the <code>-test</code> suffix.</p><p>However you set up the environment, if you change the version of the app you&#x27;ll need to re-run the Behat init command so that your Moodle site knows about it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-behat">Configuring Behat<a class="hash-link" href="#configuring-behat" title="Direct link to heading">​</a></h3><p>In order to enable app testing, you need to add the following configuration to your site&#x27;s <code>config.php</code> file:</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">$CFG</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token property" style="color:#36acaa">behat_ionic_wwwroot</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;http://localhost:8100&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The url you use here must be reachable by your Moodle site, and the application needs to be served at this url when running tests and also when you initialise the Behat environment.</p><p>The Moodle App <a href="/devdocs/docs/moodleapp/development/setup/app-in-browser">only works in Chromium-based browsers</a>, so mobile tests will be ignored if you are using any other browser. You can learn how to configure the browser used in your tests in the <a href="https://docs.moodle.org/dev/Running_acceptance_test" target="_blank" rel="noopener noreferrer">Running acceptance test</a> page.</p><p>If everything is configured properly, you should see &quot;Configured app tests for version X.X.X&quot; after running <code>admin/tool/behat/cli/init.php</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="running-behat">Running Behat<a class="hash-link" href="#running-behat" title="Direct link to heading">​</a></h2><p>To run mobile tests in Behat, simply launch Behat in the usual way. The app tests all have the <code>@app</code> tag, so if you want to run all the mobile tests you can use <code>--tags=@app</code>.</p><p>It is OK to combine mobile and web tests in the same run.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="writing-tests">Writing tests<a class="hash-link" href="#writing-tests" title="Direct link to heading">​</a></h2><p>This page assumes you already know all about <a href="https://docs.moodle.org/dev/Writing_acceptance_tests" target="_blank" rel="noopener noreferrer">Writing acceptance tests</a> in general.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-structure">Test structure<a class="hash-link" href="#test-structure" title="Direct link to heading">​</a></h3><p>Mobile app test scenarios should be marked <code>@app</code> and <code>@javascript</code> in addition to any other tags.</p><p>You are writing a normal Behat test and this is likely to require background steps, such as creating courses, users, groups, etc.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-the-app">Start the app<a class="hash-link" href="#start-the-app" title="Direct link to heading">​</a></h3><p>When you want to get started testing the application, you can use the following step to launch the application:</p><div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Given I enter the app</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will:</p><ul><li>Set up all the Moodle server settings to allow the Moodle App to connect.</li><li>Restart the browser, this is needed to ensure that it doesn&#x27;t use data from previous runs.</li><li>Set the browser to a suitable phone size (you can change it with other steps if you want a tablet or a different size).</li><li>Open the app in the test browser.</li><li>Inject the necessary JavaScript code to support Behat testing.</li><li>Skip the onboarding and enter the site url in the initial screens of the app, if necessary.</li></ul><p>After this step completes, if it is the first time you ran the app inside this scenario, you will be at the login screen. If you logged in earlier, you will be at the start page.</p><p>You can also use this step if you are already using the app and it will restart it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="log-in-to-the-app">Log in to the app<a class="hash-link" href="#log-in-to-the-app" title="Direct link to heading">​</a></h3><p>To log in, you can use the following step:</p><div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">When I log in as &quot;student&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is the same step that&#x27;s used to log into standard Moodle, and it works in the app as well. You should have created the user in background steps, and it will log in using the text as both username and password.</p><p>You will then be left at the start page.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="standard-steps">Standard steps<a class="hash-link" href="#standard-steps" title="Direct link to heading">​</a></h3><p>Technically, you can use any standard Behat action in the app. However, most of them will probably not work as you expect because the app runs on a different environment. It is still a website, but it&#x27;s built using <a href="https://ionicframework.com/docs/" target="_blank" rel="noopener noreferrer">Ionic Framework</a>.</p><p>One important problem is that the app has a complex DOM, and previous pages that are &quot;back&quot; from your current page may still be present in the DOM. Which means that any steps that just look for the first matching element in the DOM are likely to look for elements on a page you&#x27;re not even on.</p><p>Another issue is that Ionic relies heavily on <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM" target="_blank" rel="noopener noreferrer">the Shadow DOM</a>, and most steps in standard Moodle are not prepared to handle that.</p><p>For these and other reasons, there are some steps that have been implemented specifically for the app. You can distinguish them from others because most of them end with &quot;in the app&quot;.</p><p>Having said that, here&#x27;s a list of steps that work and you can use reliably.</p><ul><li>Any step you normally need to set up information in Moodle — For example, creating courses, users, etc.</li><li><code>I change viewport size to &quot;{width}x{height}&quot;</code> — You can use this step to simulate switching between portrait and landscape formats.</li><li><code>I pause</code> — This step works and it is very useful to debug your scenario.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="actions">Actions<a class="hash-link" href="#actions" title="Direct link to heading">​</a></h3><div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">When I press &quot;Course 1&quot; in the app</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will click an element found using accessibility rules, so it could be visible text, content inside <code>aria-label</code>, content described by <code>ara-labelledby</code>, etc. It should work for links, buttons and other clickable elements.</p><div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">When I press &quot;Course 1&quot; near &quot;Unique text&quot; in the app</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can use this step to narrow matches if the text you&#x27;re providing is duplicated throughout the page.</p><p>The second value, &quot;Unique text&quot; in this example, should be unique on the page. Otherwise, you may have issues finding the element that you seek. The system will press the element matching your text that is nearest to the one found using the unique text.</p><p>Nearest is defined in terms of the DOM rather than pixel position; it is based on the number of steps you would have to take up the tree from the candidate element before you get to a shared ancestor with the unique text.</p><div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">When I select &quot;Item 1&quot; in the app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">When I select &quot;Item 1&quot; near &quot;Unique text&quot; in the app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">When I unselect &quot;Item 1&quot; in the app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">When I unselect &quot;Item 1&quot; near &quot;Unique text&quot; in the app</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can use these steps to select or unselect radio buttons, check boxes, and such.</p><p>You could use the previous <code>I press</code> step as well, but in some cases you will notice that it doesn&#x27;t work as you expect. This is due to some internal quirks of how Ionic renders these components, so prefer using this specific steps where possible.</p><div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">When I set the field &quot;field name&quot; to &quot;text value&quot; in the app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">When I set the field &quot;field name&quot; near &quot;Unique text&quot; to &quot;text value&quot; in the app</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This sets a text field with the given value. The same rules will apply to find the input element as for clicking, so using the input name will not suffice. This is in order to encourage accessibility best practices. The only difference with the previous step is that this only matches fillable elements such as <code>&lt;input&gt;</code>, <code>&lt;textarea&gt;</code> and elements with <code>contenteditable=&quot;true&quot;</code>.</p><div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">When I press the back button in the app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">When I press the more menu button in the app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">When I press the page menu button in the app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">When I press the user menu button in the app</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>These steps will press, respectively:</p><ul><li>The <strong>back button</strong> — This is the left pointing arrow at top left of the app.</li><li>The <strong>more menu</strong> button — This is the icon with at bottom right of the app.</li><li>The <strong>page menu</strong> button, if present — This is the icon with the three dots at top right of the app.</li><li>The <strong>user menu</strong> button, if present — This is the avatar button at top right of the app present on navigation level 1.</li></ul><div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">When I switch to the browser tab opened by the app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">When I close the browser tab opened by the app</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>These two steps are necessary if you want to test the transition between the app and a browser.</p><p>For example, after pressing &quot;Open in browser&quot; you can use the first step above, and you will be able to use normal Moodle Behat steps to work in the browser tab. Once you&#x27;re finished, you can use the second step to go back to the app.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="assertions">Assertions<a class="hash-link" href="#assertions" title="Direct link to heading">​</a></h3><p>Like actions, there are some Behat assertions that are specific to the app.</p><div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Then I should find &quot;Course 1&quot; in the app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Then I should find &quot;Course 1&quot; near &quot;Unique text&quot; in the app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Then I should not find &quot;Course 1&quot; in the app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Then I should not find &quot;Course 1&quot; near &quot;Unique text&quot; in the app</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>These steps can be used to assert that the specified text exists somewhere in the app.</p><p>Notice that the standard <code>I should see</code> step may not work in the app because of the Shadow DOM. This step will also search using accessibility rules, so text within <code>aria-label</code> or described with <code>aria-labelledby</code> will work as well.</p><div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Then the header should be &quot;Course 1&quot; in the app</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This checks the text of the current page header. It must be an exact match for the specified text.</p><p>You could have used the <code>I should find</code> step described previously, but this allows you to specifically check the header as opposed to anything in the page.</p><div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Then &quot;Item 1&quot; should be selected in the app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Then &quot;Item 1&quot; near &quot;Unique text&quot; should be selected in the app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Then &quot;Item 1&quot; should not be selected in the app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Then &quot;Item 1&quot; near &quot;Unique text&quot; should not be selected in the app</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can use these steps to assert whether radio buttons, check boxes, and such are selected or not.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="leaving-the-app">Leaving the app<a class="hash-link" href="#leaving-the-app" title="Direct link to heading">​</a></h3><p>If you want to leave the app and go back to Moodle within a scenario, simply use a Moodle step that goes to a page. For example, use <code>I am on site homepage</code> or <code>I am on &quot;Course 1&quot; course homepage</code>.</p><p>You only need to do this if you want to carry out actions within Moodle after using the app, within the scenario. At the end of your scenario, there is no need to explicitly leave the app; Moodle will automatically start the next scenario on the Moodle start page as usual.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-complete-example">A complete example<a class="hash-link" href="#a-complete-example" title="Direct link to heading">​</a></h3><p>This example is a complete feature file that loads the app, opens a course, and asserts that the app is showing the course page:</p><div class="language-gherkin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gherkin codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@app @javascript</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Feature: Test app (demo)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  In order to test something in the app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  As a developer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  I need for this test script to run the app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Background:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Given the following &quot;courses&quot; exist:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      | fullname | shortname |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      | Course 1 | C1        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    And the following &quot;users&quot; exist:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      | username |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      | student  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    And the following &quot;course enrolments&quot; exist:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      | user     | course | role    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      | student  | C1     | student |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Scenario: Try going into the course</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    When I enter the app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    And I log in as &quot;student&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    And I press &quot;Course 1&quot; near &quot;Course overview&quot; in the app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Then the header should be &quot;Course 1&quot; in the app</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can find more complex examples looking at the <a href="https://github.com/moodlehq/moodle-local_moodlemobileapp" target="_blank" rel="noopener noreferrer">tests for the app core</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="limitations">Limitations<a class="hash-link" href="#limitations" title="Direct link to heading">​</a></h2><p>Using this approach, there are some limitations you should be aware of:</p><ul><li>Lack of native functionality — Fundamentally, it is not possible to test behaviour specific to native devices because tests are run in a browser.</li><li>Missing functionality — There are some known limitations and unsupported features, for example there is currently no obvious way to attach files. Some of these are possible, but they haven&#x27;t been implemented yet. If something is missing for your use-case, you can submit feature requests in <a href="https://tracker.moodle.org/browse/MOBILE" target="_blank" rel="noopener noreferrer">the tracker</a> using the <code>Behat</code> component.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="advanced">Advanced<a class="hash-link" href="#advanced" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="versioning">Versioning<a class="hash-link" href="#versioning" title="Direct link to heading">​</a></h3><p>Behat tests can relate to particular versions of the mobile app. For these situations, there are two types of tags you can add to your scenario or feature:</p><ul><li><code>@app_from{version}</code> — These will be included in every app matching the specified version and newer.</li><li><code>@app_upto{version}</code> — These will be included in every app matching the specified version and older.</li></ul><p>You can use two-digit or three-digit version numbers. For example, you could use <code>@app_from4.0</code> or <code>@app_upto3.9.5</code>.</p><p>After changing the app version used for testing, make sure you re-run Behat init. It is the initialisation process that stores which version of the app you&#x27;re using.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="testing-against-multiple-app-versions">Testing against multiple app versions<a class="hash-link" href="#testing-against-multiple-app-versions" title="Direct link to heading">​</a></h3><p>If you need to run tests against multiple versions of the app, you can do it in two ways:</p><ol><li>Update the code in the app workspace by checking out a different version.</li><li>Maintain multiple copies of the mobile app workspace and switch between them by changing <code>config.php</code>.</li></ol><p>In both cases, you&#x27;ll need to re-run the Behat init command and run the tests again.</p><p>Unfortunately, the only way to run this in parallel is to have separate Moodle installations with their own configurations.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="debugging-tests">Debugging tests<a class="hash-link" href="#debugging-tests" title="Direct link to heading">​</a></h3><p>If you insert a pause into your test and open the developer tools, you can debug the application like you would during development. You can learn how to do that in <a href="/devdocs/docs/moodleapp/development/setup/app-in-browser">Using the Moodle App in a browser</a>.</p><p>Additionally, you can see log information in the console about which Behat steps have been carried out so far, and whether Behat is waiting for anything. Here is an example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">VM649:391 BEHAT: </span><span class="token number" style="color:#36acaa">17</span><span class="token plain">:45:15.477 Action - Set field Username to: student2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VM649:391 BEHAT: </span><span class="token number" style="color:#36acaa">17</span><span class="token plain">:45:15.480 PENDING+: DELAY,dom-mutation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VM649:391 BEHAT: </span><span class="token number" style="color:#36acaa">17</span><span class="token plain">:45:15.982 PENDING-: DELAY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VM649:391 BEHAT: </span><span class="token number" style="color:#36acaa">17</span><span class="token plain">:45:16.28 PENDING-:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VM649:391 BEHAT: </span><span class="token number" style="color:#36acaa">17</span><span class="token plain">:45:16.98 Action - Set field Password to: student2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VM649:391 BEHAT: </span><span class="token number" style="color:#36acaa">17</span><span class="token plain">:45:16.106 PENDING+: DELAY,dom-mutation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VM649:391 BEHAT: </span><span class="token number" style="color:#36acaa">17</span><span class="token plain">:45:16.607 PENDING-: DELAY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VM649:391 BEHAT: </span><span class="token number" style="color:#36acaa">17</span><span class="token plain">:45:16.653 PENDING-:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>While the test is paused, you can also carry out some of the app Behat steps manually by typing commands into the console, which is convenient if you&#x27;re not quite sure what command would work. The commands are available in a global object called <code>behat</code>. Here are some examples:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">behat</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setField</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Password&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;student2&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">behat</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">press</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Log in&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Forgotten&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">behat</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pressStandard</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;back&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>There are more functions in the object; try using the browser&#x27;s autocomplete to see the options, or look at the source in <a href="https://github.com/moodlehq/moodle-local_moodlemobileapp/blob/master/tests/behat/app_behat_runtime.js" target="_blank" rel="noopener noreferrer">app_behat_runtime.js</a>.</p><p>If you&#x27;re using <code>moodle-docker</code>, remember that you can interact with the browser <a href="https://github.com/moodlehq/moodle-docker#using-vnc-to-view-behat-tests" target="_blank" rel="noopener noreferrer">using VNC</a>. With a VNC client you can view in real-time what behat is doing in the browser.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="writing-custom-steps">Writing custom steps<a class="hash-link" href="#writing-custom-steps" title="Direct link to heading">​</a></h3><p>If you find something missing to test your code, you can always implement custom steps.</p><p>If you&#x27;re writing a plugin, you can include a new class under <code>tests/behat/behat\_{youpluginname}.php</code>. If you&#x27;re working on application code, you can always update <a href="https://github.com/moodlehq/moodle-local_moodlemobileapp/blob/master/tests/behat/behat_app.php" target="_blank" rel="noopener noreferrer">behat_app.php</a> as well.</p><p>You can learn more about writing custom steps in the <a href="https://docs.moodle.org/dev/Writing_new_acceptance_test_step_definitions" target="_blank" rel="noopener noreferrer">Writing new acceptance test step definitions</a> page, and if you want to see how the steps that are specific to the app work, you should look into <a href="https://github.com/moodlehq/moodle-local_moodlemobileapp/blob/master/tests/behat/behat_app.php" target="_blank" rel="noopener noreferrer">behat_app.php</a> and <a href="https://github.com/moodlehq/moodle-local_moodlemobileapp/blob/master/tests/behat/app_behat_runtime.js" target="_blank" rel="noopener noreferrer">app_behat_runtime.js</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrading-tests-from-an-older-version">Upgrading tests from an older version<a class="hash-link" href="#upgrading-tests-from-an-older-version" title="Direct link to heading">​</a></h2><p>If you wrote tests before the app started using Ionic 5 (in version 3.9.5), it is possible that your tests are not working any longer. This guide has been rewritten with the latest information, so make sure to read the rest of the document to see what changed.</p><p>In general though, upgrading your current tests should be mostly straightforward. Here are some overall things to keep in mind:</p><ul><li>Ionic 5 starts using <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM" target="_blank" rel="noopener noreferrer">the Shadow DOM</a>, and that&#x27;s the source of many issues for the previous version of the Behat tests. The built-in steps have been rewritten to keep that in mind, and mostly should work the same way. One important difference is that they look for content using accessibility rules, so some of your previous assumptions may not be working.</li><li>Before this update, it was safe to use the standard <code>I should see</code> step. But given the problems mentioned, it is likely that it breaks down in many situations. Instead, you should use the new <code>I should find ... in the app</code> steps.</li><li>Similar to the last point, some radio inputs and checkboxes that worked before are broken. You should be able to use the new <code>I select ... in the app</code> steps instead.</li><li>If you were relying in xpath or css selectors before, they will probably not work anymore. Even if you try to patch them, these selectors don&#x27;t pierce through the Shadow DOM. In any case, it&#x27;s always better to use accessible locators in your test like a real user would, so you can use this opportunity to improve accessibility in your plugin.</li><li>Pay special attention to any assertions such as <code>should not exist</code> that you have in your tests. These assertions will not fail, because the elements won&#x27;t be found. But if you get an eventual bug when something is shown that shouldn&#x27;t, those steps will probably not pick it up because the locators may have changed.</li><li>If you were running your tests in CI, there is a new dependency even if you&#x27;re only testing a plugin and not running the application tests. The test definitions have been moved from core to the <a href="https://github.com/moodlehq/moodle-local_moodlemobileapp/" target="_blank" rel="noopener noreferrer">local_moodlemobileapp</a> plugin, and you should have it installed in your Moodle site running the tests. This was done in order to decouple application code from the core.</li></ul><p>If you also need to upgrade your plugin, and not just the tests, check out the <a href="/devdocs/docs/moodleapp/upgrading/plugins-upgrade-guide">Moodle App Plugins upgrade guide</a> page.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="general-advice">General advice<a class="hash-link" href="#general-advice" title="Direct link to heading">​</a></h3><p>If you are stuck with an error and you can&#x27;t find a way to continue, here&#x27;s a list of things you can do:</p><ul><li>Make sure you added <code>$CFG-&gt;behat_ionic_wwwroot = &quot;http://localhost:8100&quot;;</code> (or equivalent) to your <code>config.php</code> file, and that url is reachable from the host where your Moodle site is running.</li><li>Remember when you need to re-run <code>admin/tool/behat/cli/init.php</code>, and make sure that you see &quot;Configured app tests for version X.X.X&quot;. When in doubt, just run it again; it may fix your problem.</li><li>It is possible that your tests break if you&#x27;re using an unstable version of the app. Try to use stable versions using the <code>master</code> branch if you&#x27;re working with the source code or tagged releases if you&#x27;re using Docker.</li><li>Mobile Behat tests don&#x27;t work well with XDebug, so if you&#x27;re using it, turn it off in <code>php.ini</code> while running the tests. Also, remember to restart Apache if necessary.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unable-to-load-app-version-from-httpmoodleapp8100configjson">Unable to load app version from http://moodleapp:8100/config.json<a class="hash-link" href="#unable-to-load-app-version-from-httpmoodleapp8100configjson" title="Direct link to heading">​</a></h3><p>This message appears when the Moodle site is not able to reach the app. Make sure that the url is available from the host you&#x27;re running the Behat commands from. Also make sure that the app is actually running at the specified url.</p><p>It&#x27;s ok if the actual <code>/config.json</code> url doesn&#x27;t work, that&#x27;s actually a remnant from legacy code. The url that Moodle is actually looking for is <code>/assets/env.json</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-plugins-required-by-this-course-could-not-be-loaded-correctly">The plugins required by this course could not be loaded correctly...<a class="hash-link" href="#the-plugins-required-by-this-course-could-not-be-loaded-correctly" title="Direct link to heading">​</a></h3><p>This means either some activity on the course is not adapted to support the moodle app or there is a timeout in the request to your behat site.</p><p>To clear the timeout message, open the app in your <a href="/devdocs/docs/moodleapp/development/setup/app-in-browser">development browser</a>, open the Inspector, open the Application tab, select Clear storage, press Clear site data, close Inspector, close the tab with mobile site, re-open mobile site in new tab and log in. Then in a separate tab, log in to your behat site (you can find the url in <code>$CFG-&gt;behat_wwwroot</code> within your <code>config.php</code> file) and make sure you can get into the course without seeing the error.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fatal-error-maximum-execution-time-of-30-seconds-exceeded-in">Fatal error: Maximum execution time of 30 seconds exceeded in...<a class="hash-link" href="#fatal-error-maximum-execution-time-of-30-seconds-exceeded-in" title="Direct link to heading">​</a></h3><p>This means that your local site has not been updated/visited since an upgrade. Just go to your local behat site (you can find the url in <code>$CFG-&gt;behat_wwwroot</code> within your <code>config.php</code> file), log in as admin and run notifications, then visit a course. Do this step often to avoid timeouts!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-fails-because-of-the-browser-language">Test fails because of the browser language<a class="hash-link" href="#test-fails-because-of-the-browser-language" title="Direct link to heading">​</a></h3><p>If your operating system is in a different language than English, the tests may fail.</p><p>Chrome does not have an easy way to force the browser language to English, so the best way to solve the issue is forcing the app default language to English.</p><p>To do so, just set the <code>forcedefaultlanguage</code> attribute to <code>&quot;en&quot;</code> in your <code>moodle.config.json</code> file in the app.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="application-build-gets-killed-without-any-error-information">Application build gets killed without any error information<a class="hash-link" href="#application-build-gets-killed-without-any-error-information" title="Direct link to heading">​</a></h3><p>In some situations, it is possible that you see <code>Killed</code> in the console and a command suddenly stops without any further information. In these situations, make sure to check the <a href="#general-advice">General advice</a> section, but it is possible that your computer is running out of memory.</p><p>If you are running the scripts inside of a Docker container, make sure that Docker is allocated enough memory. If you are using Docker desktop (for example, on a Mac), you can inspect these settings under Preferences &gt; Resources &gt; Advanced &gt; Memory.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="macos-running-moodle-docker-commands-show-grep-usage-options-and-do-nothing-else">MacOS: running moodle-docker commands show grep usage options and do nothing else<a class="hash-link" href="#macos-running-moodle-docker-commands-show-grep-usage-options-and-do-nothing-else" title="Direct link to heading">​</a></h3><p>This is <a href="https://github.com/moodlehq/moodle-docker/issues/188" target="_blank" rel="noopener noreferrer">a known issue</a> in moodle-docker for Mac. The workaround for now is just to explicitly initialize the <code>MOODLE_DOCKER_APP_RUNTIME</code> variable in your local environment.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/devdocs/docs/tags/quality-assurance">Quality Assurance</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/devdocs/docs/tags/testing">Testing</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/devdocs/docs/tags/behat">Behat</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/devdocs/docs/tags/moodle-app">Moodle App</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/moodle/devdocs/edit/main/docs/moodleapp/development/testing/acceptance-testing.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-06-17T11:03:23.000Z">17/06/2022</time></b> by <b>Andrew Lyons</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/devdocs/docs/category/testing"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Testing</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/devdocs/docs/moodleapp/development/testing/unit-testing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Unit testing</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a><ul><li><a href="#configuring-the-moodle-site" class="table-of-contents__link toc-highlight">Configuring the Moodle site</a></li><li><a href="#configuring-the-moodle-app" class="table-of-contents__link toc-highlight">Configuring the Moodle App</a></li><li><a href="#configuring-behat" class="table-of-contents__link toc-highlight">Configuring Behat</a></li></ul></li><li><a href="#running-behat" class="table-of-contents__link toc-highlight">Running Behat</a></li><li><a href="#writing-tests" class="table-of-contents__link toc-highlight">Writing tests</a><ul><li><a href="#test-structure" class="table-of-contents__link toc-highlight">Test structure</a></li><li><a href="#start-the-app" class="table-of-contents__link toc-highlight">Start the app</a></li><li><a href="#log-in-to-the-app" class="table-of-contents__link toc-highlight">Log in to the app</a></li><li><a href="#standard-steps" class="table-of-contents__link toc-highlight">Standard steps</a></li><li><a href="#actions" class="table-of-contents__link toc-highlight">Actions</a></li><li><a href="#assertions" class="table-of-contents__link toc-highlight">Assertions</a></li><li><a href="#leaving-the-app" class="table-of-contents__link toc-highlight">Leaving the app</a></li><li><a href="#a-complete-example" class="table-of-contents__link toc-highlight">A complete example</a></li></ul></li><li><a href="#limitations" class="table-of-contents__link toc-highlight">Limitations</a></li><li><a href="#advanced" class="table-of-contents__link toc-highlight">Advanced</a><ul><li><a href="#versioning" class="table-of-contents__link toc-highlight">Versioning</a></li><li><a href="#testing-against-multiple-app-versions" class="table-of-contents__link toc-highlight">Testing against multiple app versions</a></li><li><a href="#debugging-tests" class="table-of-contents__link toc-highlight">Debugging tests</a></li><li><a href="#writing-custom-steps" class="table-of-contents__link toc-highlight">Writing custom steps</a></li></ul></li><li><a href="#upgrading-tests-from-an-older-version" class="table-of-contents__link toc-highlight">Upgrading tests from an older version</a></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#general-advice" class="table-of-contents__link toc-highlight">General advice</a></li><li><a href="#unable-to-load-app-version-from-httpmoodleapp8100configjson" class="table-of-contents__link toc-highlight">Unable to load app version from http://moodleapp:8100/config.json</a></li><li><a href="#the-plugins-required-by-this-course-could-not-be-loaded-correctly" class="table-of-contents__link toc-highlight">The plugins required by this course could not be loaded correctly...</a></li><li><a href="#fatal-error-maximum-execution-time-of-30-seconds-exceeded-in" class="table-of-contents__link toc-highlight">Fatal error: Maximum execution time of 30 seconds exceeded in...</a></li><li><a href="#test-fails-because-of-the-browser-language" class="table-of-contents__link toc-highlight">Test fails because of the browser language</a></li><li><a href="#application-build-gets-killed-without-any-error-information" class="table-of-contents__link toc-highlight">Application build gets killed without any error information</a></li><li><a href="#macos-running-moodle-docker-commands-show-grep-usage-options-and-do-nothing-else" class="table-of-contents__link toc-highlight">MacOS: running moodle-docker commands show grep usage options and do nothing else</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Moodle</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/devdocs/general/releases">Release notes</a></li><li class="footer__item"><a class="footer__link-item" href="/devdocs/general/projects">Projects</a></li></ul></div><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/devdocs/general/documentation">Developer docs</a></li><li class="footer__item"><a href="https://docs.moodle.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">User docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.moodle.org/dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Legacy docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/devdocs/general/documentation/code-of-conduct">Code of conduct</a></li><li class="footer__item"><a href="https://moodle.org/mod/forum/view.php?id=55" target="_blank" rel="noopener noreferrer" class="footer__link-item">General Developer Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/moodle" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/moodle" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item">
                    <a href="https://www.netlify.com" target="_blank" rel="noreferrer noopener" aria-label="Deploys by Netlify">
                        <img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify" width="114" height="51">
                    </a>
                    </li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
Copyright © 2022 Moodle Pty Ltd. Built with Docusaurus.</div></div></div></footer></div>
<script src="/devdocs/assets/js/runtime~main.108433aa.js"></script>
<script src="/devdocs/assets/js/main.2dbacd86.js"></script>
</body>
</html>