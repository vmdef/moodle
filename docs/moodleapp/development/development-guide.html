<!doctype html>
<html lang="en-AU" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-moodleapp/development/development-guide">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-L9EE8RW5B1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-L9EE8RW5B1",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Moodle Developer Resources" href="/devdocs/opensearch.xml">


<link rel="icon" href="/devdocs/img/icons/orange_m.svg">
<link rel="manifest" href="/devdocs/manifest.json">
<meta name="theme-color" content="rgb(208, 99, 0)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/devdocs/img/icons/maskable_icon.png">
<link rel="mask-icon" href="/devdocs/img/icons/maskable_icon.png" color="rgb(208, 99, 0)">
<meta name="msapplication-TileImage" content="/devdocs/img/icons/maskable_icon.png">
<meta name="msapplication-TileColor" content="#000"><title data-rh="true">Moodle App Development guide | Moodle Developer Resources</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://moodledev.io/devdocs/docs/moodleapp/development/development-guide"><meta data-rh="true" name="docusaurus_locale" content="en-AU"><meta data-rh="true" name="docsearch:language" content="en-AU"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Moodle App Development guide | Moodle Developer Resources"><meta data-rh="true" name="description" content="This document contains information that developers should know before starting to code on the Mobile App. If you are only interested in developing a site plugin, you should read the Moodle App Plugins development guide instead."><meta data-rh="true" property="og:description" content="This document contains information that developers should know before starting to code on the Mobile App. If you are only interested in developing a site plugin, you should read the Moodle App Plugins development guide instead."><link data-rh="true" rel="icon" href="/devdocs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://moodledev.io/devdocs/docs/moodleapp/development/development-guide"><link data-rh="true" rel="alternate" href="https://moodledev.io/devdocs/docs/moodleapp/development/development-guide" hreflang="en-AU"><link data-rh="true" rel="alternate" href="https://moodledev.io/devdocs/docs/moodleapp/development/development-guide" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://NNUY2D5GV2-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/devdocs/assets/css/styles.294a7229.css">
<link rel="preload" href="/devdocs/assets/js/runtime~main.108433aa.js" as="script">
<link rel="preload" href="/devdocs/assets/js/main.2dbacd86.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/devdocs/"><div class="navbar__logo"><img src="/devdocs/img/Moodle.svg" alt="Moodle Developer Resources" class="themedImage_ToTc themedImage--light_HNdA" height="35px" width="138px"><img src="/devdocs/img/Moodle.svg" alt="Moodle Developer Resources" class="themedImage_ToTc themedImage--dark_i4oU" height="35px" width="138px"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/devdocs/docs">Guides</a><a class="navbar__item navbar__link" href="/devdocs/general/community/contribute">Community</a><a class="navbar__item navbar__link" href="/devdocs/general/development/gettingstarted">Coding</a><a class="navbar__item navbar__link" href="/devdocs/general/development/process">Process</a></div><div class="navbar__items navbar__items--right"><div class="wrapper_Jz6K"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/devdocs/docs">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/devdocs/docs/guides">Developer guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Developer guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/devdocs/docs/apis">API guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;API guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/devdocs/docs/devupdate">Developer update</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/devdocs/docs/moodleapp">Moodle App</a><button aria-label="Toggle the collapsible sidebar category &#x27;Moodle App&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/devdocs/docs/moodleapp/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/devdocs/docs/moodleapp/accessibility">Accessibility</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/devdocs/docs/moodleapp/customisation">Customisation</a><button aria-label="Toggle the collapsible sidebar category &#x27;Customisation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/devdocs/docs/category/development">Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;Development&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/devdocs/docs/moodleapp/development/setup">Setting up your environment</a><button aria-label="Toggle the collapsible sidebar category &#x27;Setting up your environment&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/devdocs/docs/moodleapp/development/development-guide">Development guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/devdocs/docs/moodleapp/development/plugins-development-guide">Plugins development guide</a><button aria-label="Toggle the collapsible sidebar category &#x27;Plugins development guide&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/devdocs/docs/moodleapp/development/custom-push-notifications">Sending custom Push Notifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/devdocs/docs/moodleapp/development/deep-linking">Deep Linking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/devdocs/docs/moodleapp/development/network-debug">Debugging network requests</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/devdocs/docs/category/testing">Testing</a><button aria-label="Toggle the collapsible sidebar category &#x27;Testing&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/devdocs/docs/category/scripts">Scripts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Scripts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/devdocs/docs/moodleapp/development/release-process">Release process</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/devdocs/docs/moodleapp/faq">FAQ</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/devdocs/docs/category/upgrading-your-code">Upgrading your code</a><button aria-label="Toggle the collapsible sidebar category &#x27;Upgrading your code&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/devdocs/general/app_releases">Release notes</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/devdocs/general/releases/4.0">Release notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/devdocs/general/projects">Projects</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/devdocs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/devdocs/docs/moodleapp"><span itemprop="name">Moodle App</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/devdocs/docs/category/development"><span itemprop="name">Development</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Development guide</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: master</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Moodle App Development guide</h1></header><p>This document contains information that developers should know before starting to code on the Mobile App. If you are only interested in developing a site plugin, you should read <a href="/devdocs/docs/moodleapp/development/plugins-development-guide">the Moodle App Plugins development guide</a> instead.</p><p>Please notice that this documentation is useful to develop code that will be integrated in the standard app or in a custom app. Developers that want to add mobile support to their Moodle plugins don&#x27;t need to follow this.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Notice</h5></div><div class="admonition-content"><p>Before embarking on Moodle-specific documentation, we recommend that you are at least familiar with <a href="https://angular.io/" target="_blank" rel="noopener noreferrer">Angular</a> and <a href="https://ionicframework.com/" target="_blank" rel="noopener noreferrer">Ionic Framework</a>, the core technologies used in the application. We&#x27;ll reference any relevant concepts, but having a basic understanding will take you a long way in understanding the Moodle App.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-your-development-environment">Setting up your development environment<a class="hash-link" href="#setting-up-your-development-environment" title="Direct link to heading">​</a></h2><p>In order to get started, you&#x27;ll need to prepare your development environment. We recommend that you do it before proceeding with the guide, that way you can tinker with the codebase to solidify your understanding.</p><p>You can obtain a copy of the source code by cloning the public repository. If you want to work on a specific version of the app, you can check the tag with the version number you need; for example <code>v3.9.5</code>. If you want to work on the latest development version, you should check out the <code>integration</code> branch:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone git@github.com:moodlehq/moodleapp.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> moodleapp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> checkout integration </span><span class="token comment" style="color:#999988;font-style:italic"># or `git checkout v3.9.5`</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The only things you need to install before running the app are NodeJS and npm. Make sure that you are using the correct versions of each environment (looking at the <code>engines</code> entry in <code>package.json</code>). We recommend using a version manager like <a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener noreferrer">nvm</a> to make this easier, you can prepare the correct environment running <code>nvm install</code> in the project root. Remember to run this every time you work with the app, or if you&#x27;re not working on any other node projects in your computer you can run <code>nvm alias default `node -v` </code> to make it the default.</p><p>Once you have the correct environment set up, you can run the application with the following two commands:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will launch the application in a browser, but keep in mind that it only works with chromium-based browsers. You can read more about that in the <a href="/devdocs/docs/moodleapp/development/setup/app-in-browser">Using the Moodle App in a browser</a> page.</p><p>Other than this, there are different things you&#x27;ll need to do depending on what you are trying to achieve. We&#x27;ll go over some of them briefly, but if you want to learn more about this or something isn&#x27;t working as you expect, make sure to check out the full guide on <a href="/devdocs/docs/moodleapp/development/setup">Setting up your development environment for the Moodle App</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="editing-code">Editing code<a class="hash-link" href="#editing-code" title="Direct link to heading">​</a></h3><p>You can use your favorite editor to work on the application.</p><p>We recommend using <a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">VSCode</a> as it is the one used by the core team and the repository is configured with some specific settings for the Moodle App.</p><p>The code follows the <a href="/devdocs/general/development/policies/codingstyle-moodleapp">Moodle App Coding Style</a>, and many of the style rules are enforced with <a href="https://eslint.org/" target="_blank" rel="noopener noreferrer">ESLint</a>. If you are using VSCode, you can automatically lint your files using the <a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint" target="_blank" rel="noopener noreferrer">ESLint extension</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="debugging">Debugging<a class="hash-link" href="#debugging" title="Direct link to heading">​</a></h3><p>While working on the app, you&#x27;ll want to debug what&#x27;s going on under the hood. The application uses a logging mechanism to inform of what&#x27;s happening, so if you open the console during development you will see a bunch of messages that you may find useful.</p><p>If you are working on something related with the user interface, it is useful to inspect the state of the Angular components in the page. You can do that using the <a href="https://github.com/anton-lunev/angular-state-inspector" target="_blank" rel="noopener noreferrer">Angular State Inspection browser extension</a>.</p><p>If you are working on something that is pure logic (although it can involve components), you may want to give <a href="#unit">unit testing</a> a try. If you are <a href="https://code.visualstudio.com/Docs/editor/debugging" target="_blank" rel="noopener noreferrer">using VSCode to run the tests</a>, you can use breakpoints right on your editor. If you are struggling to reproduce an issue in tests, you can also use breakpoints in the browser <a href="https://developer.chrome.com/docs/devtools/javascript/" target="_blank" rel="noopener noreferrer">using the Sources Panel</a>.</p><p>If you need to debug how the application is interacting with a Moodle site, you&#x27;ll need to take a look at the network requests. Most of the time <a href="https://developer.chrome.com/docs/devtools/network/" target="_blank" rel="noopener noreferrer">using the Network Panel</a> should suffice, but if that isn&#x27;t working take a look at the <a href="/devdocs/docs/moodleapp/development/network-debug">Debugging network requests in the Moodle App</a> page.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="working-with-a-moodle-site">Working with a Moodle site<a class="hash-link" href="#working-with-a-moodle-site" title="Direct link to heading">​</a></h3><p>When you are using the app, you&#x27;ll need to connect with a Moodle site. You may already have your own site, but using a real site may not be the best choice for development.</p><p>If you&#x27;re working on something that doesn&#x27;t need anything specific from your site, you can use a test site like <a href="https://school.moodledemo.net" target="_blank" rel="noopener noreferrer">school.moodledemo.net</a>. This is a site that will reset all the data every hour, so you don&#x27;t have to worry about making any persistent change by mistake. You can also use a shortcut to log in as a student or teacher using <code>student</code> or <code>teacher</code> instead of a url. However, keep in mind that this site is also used by others who are new to Moodle, so be sensible and don&#x27;t abuse it.</p><p>If you need to configure something from the site, your best option is to run a Moodle site on your computer. Setting that up is outside the scope of this document, but we recommend using <a href="https://github.com/moodlehq/moodle-docker" target="_blank" rel="noopener noreferrer">moodle-docker</a> because it comes with everything you need (and it also supports running the app!). If you need anything specific from a course, you can always replicate it on your local site using the <a href="https://docs.moodle.org/311/en/Backup" target="_blank" rel="noopener noreferrer">backup and restore functionality</a>. You can create a backup from your production site, and restore it in your local site.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="working-on-native-functionality">Working on native functionality<a class="hash-link" href="#working-on-native-functionality" title="Direct link to heading">​</a></h3><p>Most of the time, we recommend that you develop using a browser because it&#x27;s faster and easier to work with. However, sometimes you may need native functionality that is only available on a mobile device.</p><p>You can learn how to set up your environment by reading Ionic&#x27;s documentation for <a href="https://ionicframework.com/docs/developing/android" target="_blank" rel="noopener noreferrer">Android</a> and <a href="https://ionicframework.com/docs/developing/ios" target="_blank" rel="noopener noreferrer">iOS</a>. The Moodle App also comes with some npm scripts used for native development. You can build and launch the app by calling <code>npm run dev:android</code> and <code>npm run dev:ios</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="folders-structure">Folders structure<a class="hash-link" href="#folders-structure" title="Direct link to heading">​</a></h2><p>In this section, we&#x27;ll see how files and folders are organised within the <code>src/</code> folder.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="indexhtml">index.html<a class="hash-link" href="#indexhtml" title="Direct link to heading">​</a></h3><p>This html file contains the shell where the application will be rendered. Before the app is ready, even before JavaScript is loaded, this is what the application will look like. In a mobile device, users will never see this because it is hidden by the splash screen until the application is ready. That&#x27;s why there isn&#x27;t any markup other than the root component that will be rendered by Angular.</p><p>You won&#x27;t see any script files referenced here because those are injected later in the compilation process. You can see the actual file in the <code>www/</code> folder after running the build script.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="maints">main.ts<a class="hash-link" href="#maints" title="Direct link to heading">​</a></h3><p>This file is the main entry point of the application, the first code that runs when the application is launched. The application is bootstrapped by Angular using our root application module.</p><p>You can learn more about this in the <a href="#application-lifecycle">Application Lifecycle</a> section.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="polyfillsts">polyfills.ts<a class="hash-link" href="#polyfillsts" title="Direct link to heading">​</a></h3><p>This file adds <a href="https://en.wikipedia.org/wiki/Polyfill_(programming)" target="_blank" rel="noopener noreferrer">polyfills</a> for missing functionality in the platform.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="app">app/<a class="hash-link" href="#app" title="Direct link to heading">​</a></h3><p>This folder contains the root component and the root module of the application.</p><p>You will notice that the app.module.ts file is quite small. This is because it only includes Angular and Ionic boilerplate, leaving the heavy lifting to the code within <a href="#core">core/</a> and <a href="#addons">addons/</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="core">core/<a class="hash-link" href="#core" title="Direct link to heading">​</a></h3><p>This folder contains the basic functionality of the application, and exposes pluginable interfaces for other parts to hook into. Anything defined here can be imported anywhere since it&#x27;s critical for the app and it is available everywhere (in contrast to code within <a href="#addons">addons/</a>). In order to identify code from this folder, all classes start with the <code>Core</code> prefix.</p><p>The <code>core.module.ts</code> file defines a module that imports all the core providers and modules. It encapsulates the initialisation of the application core.</p><p>The <code>shared.module.ts</code> file defines a <a href="https://angular.io/guide/module-types#shared-ngmodules" target="_blank" rel="noopener noreferrer">Shared Module</a> that exposes core declarables (components, directives and pipes). When other modules use any of these, it&#x27;s preferable to import this module instead of individual declarable modules separately.</p><p>There is also a <code>constants.ts</code> file with global read-only values.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="coreinitializers">core/initializers/<a class="hash-link" href="#coreinitializers" title="Direct link to heading">​</a></h4><p>This folder contains a collection of scripts that are run within the <a href="https://angular.io/api/core/APP_INITIALIZER" target="_blank" rel="noopener noreferrer">Angular initialisation process</a>.</p><p>These files are automatically loaded using webpack, so it isn&#x27;t necessary to import them anywhere. You can see how they are loaded in <code>src/core/initializers/index.ts</code>.</p><p>Keep in mind that any code placed here will delay the <a href="#application-lifecycle">application startup</a>, so it&#x27;s critical that only the essential processes are included here. If something can be initialised lazily, it should.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="coreservices">core/services/<a class="hash-link" href="#coreservices" title="Direct link to heading">​</a></h4><p>This folder contains <a href="https://angular.io/guide/architecture-services" target="_blank" rel="noopener noreferrer">Angular services</a> available anywhere in the application.</p><p>Most of them are <a href="https://angular.io/guide/singleton-services" target="_blank" rel="noopener noreferrer">Singleton Services</a>, and they can be accessed statically using their corresponding <a href="#service-singletons">Service Singleton</a>.</p><p>Given that services are created on demand, none of them is guaranteed to be initialised when the application is ready. So anything that&#x27;s essential for the application to run should be placed in an <a href="#coreinitializers">initializer</a> instead. In case that the initialisation relies on a service, it can be accessed using its Service Singleton. One good example of this is the database initialisation, which is placed on an initializer but calls each service&#x27;s <code>initializeDatabase</code> method.</p><p>And of course, service dependencies can be declared in the constructor to use Angular&#x27;s built-in dependency management.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="corecomponents">core/components/<a class="hash-link" href="#corecomponents" title="Direct link to heading">​</a></h4><p>This folder contains <a href="https://angular.io/guide/architecture-components" target="_blank" rel="noopener noreferrer">Angular components</a> available anywhere in the application (but remember that they should be imported explicitly using <code>CoreSharedModule</code>). They are exposed to the shared module using their own module: <code>CoreComponentsModule</code>.</p><p>This folder also contains an <code>animations.ts</code> file with reusable <a href="https://angular.io/guide/animations" target="_blank" rel="noopener noreferrer">Angular animations</a>.</p><p>All components must be declared with tag selectors starting with their module namespace (<em>core-</em> in this case), and defined within a folder with their selector (without the namespace prefix). These component folders can contain the following files:</p><ul><li><code>{component-name}.ts</code> — Component class.</li><li><code>{namespace}-{component-name}.html</code> — Component template.</li><li><code>{component-name}.scss</code> — Component-scoped styles.</li></ul><p>Additionally, auxiliary components that are only used locally can be defined in the same folder, starting with the name of their parent component. For example, looking at the <code>core-recaptcha</code> component we can find the following files:</p><ul><li><code>recaptcha.ts</code> — Recaptcha component class.</li><li><code>core-recaptcha.html</code> — Recaptcha component template.</li><li><code>recaptcha-modal.ts</code> — Auxiliary modal component class.</li><li><code>core-recaptcha-modal.html</code> — Auxiliary modal component template.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="coredirectives-and-corepipes">core/directives/ and core/pipes/<a class="hash-link" href="#coredirectives-and-corepipes" title="Direct link to heading">​</a></h4><p>These folders contain <a href="https://angular.io/guide/architecture-components#directives" target="_blank" rel="noopener noreferrer">Angular directives</a> and <a href="https://angular.io/guide/architecture-components#pipes" target="_blank" rel="noopener noreferrer">Angular pipes</a> available anywhere in the application (but remember that they should be imported explicitly using <code>CoreSharedModule</code>).</p><p>They are exposed to the shared module using their own modules: <code>CoreDirectivesModule</code> and <code>CorePipesModule</code> respectively.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="coreguards">core/guards/<a class="hash-link" href="#coreguards" title="Direct link to heading">​</a></h4><p>This folder contains <a href="https://angular.io/guide/router#preventing-unauthorized-access" target="_blank" rel="noopener noreferrer">route guards</a> used to control access to restricted routes.</p><p>Given that we are working with a mobile application, and not deploying to the web, users won&#x27;t be able to access urls manually. But it is still important to have proper guards to prevent potential bugs and vulnerabilities.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="coreclasses">core/classes/<a class="hash-link" href="#coreclasses" title="Direct link to heading">​</a></h4><p>This folder contains classes that don&#x27;t fit into any other part of the application. We must be careful not to bloat this folder and turn it into a mess. There can be subfolders to group files with related functionality.</p><p>Think twice before adding anything here.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="coreutils">core/utils/<a class="hash-link" href="#coreutils" title="Direct link to heading">​</a></h4><p>Same as <a href="#coreclasses">core/classes/</a>, but containing functional utilities instead of classes.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="coresingletons">core/singletons/<a class="hash-link" href="#coresingletons" title="Direct link to heading">​</a></h4><p>This folder contains some core <a href="#singletons">Singletons</a> and the logic to make Service Singletons.</p><p>Other than Pure Singletons, there are also some third-party services exposed through Service Singletons. However, service Singletons for application services should be declared in the same file where the service is defined.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="corefeatures">core/features/<a class="hash-link" href="#corefeatures" title="Direct link to heading">​</a></h4><p>This folder contains <a href="https://angular.io/guide/module-types#domain-ngmodules" target="_blank" rel="noopener noreferrer">Domain Modules</a> for core features. Each of those modules encapsulates the functionality for a given area. Even though they can rely on each other (because anything within core is globally accessible), it should be avoided to reduce coupling.</p><p>The <code>features.module.ts</code> file defines a module that imports all feature modules.</p><p>Each feature module will be different, some may only provide services while others define routing endpoints (or both). In any case, each feature is encapsulated into its own folder.</p><p>When a module needs to export something, it has a file in its root folder named <code>{feature-name}.module.ts</code> defining the main feature module.</p><p>If a module uses <a href="https://angular.io/guide/lazy-loading-ngmodules" target="_blank" rel="noopener noreferrer">lazy loading</a>, that will be declared within a different module defined in <code>{feature-name}-lazy.module.ts</code>, and the lazy routes are exposed through the main feature module. In this way, the knowledge of which routes are loaded lazily is encapsulated within each feature folder.</p><p>Sometimes, it&#x27;s possible that a feature allows nested routes to be defined from other modules. For example, the <em>mainmenu</em> feature allows other modules to add extra tabs. In those situations, these features will also have a <code>{feature-name}-routing.module.ts</code> file.</p><p>You can learn more about the contents and motivation of these files in the <a href="#routing">Routing</a> section.</p><p>In addition to these files, feature folders may contain the following:</p><ul><li><code>{feature-name}.scss</code> — Reusable styles for components defined in this module.</li><li><code>classes/</code> — Same as <a href="#coreclasses">core/classes/</a>.</li><li><code>utils/</code> — Same as <a href="#coreutils">core/utils/</a>.</li><li><code>components/</code> — Same as <a href="#corecomponents">core/components/</a> (with the <em>core-{feature-name}-</em> namespace).</li><li><code>directives/</code> and <code>pipes/</code> — Same as <a href="#coredirectives-and-corepipes">core/directives/ and core/pipes/</a>.</li><li><code>lang.json</code> — See <a href="#language-files">Language files</a>.</li><li><code>services/</code> — Same as <a href="#coreservices">core/services/</a>.</li><li><code>pages/</code> — Page folders have the same structure as <a href="#corecomponents">core/components/</a>, but in addition they often declare modules as well to allow lazy-loading the page. In some cases, they can even have their own routing modules. For example, look at <code>core/features/mainmenu/pages/home/home-routing.module.ts</code>.</li></ul><p>In order to distinguish code from each feature, classes will be prefixed with the feature name. For example, the home page component declared in <code>core/features/mainmenu/pages/home/home.ts</code> is called <code>CoreMainMenuHomePage</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="addons">addons/<a class="hash-link" href="#addons" title="Direct link to heading">​</a></h3><p>This folder contains <a href="https://angular.io/guide/module-types#domain-ngmodules" target="_blank" rel="noopener noreferrer">Domain Modules</a> for additional features. Its structure is similar to <a href="#corefeatures">core/features/</a>, but the namespace is <em>addon-{addon-name}-</em> and addon modules are decoupled from core and each other. This means that any code within core shouldn&#x27;t import anything from addons, and addons shouldn&#x27;t import anything from each other.</p><p>This level of decoupling can be achieved using the <a href="https://en.wikipedia.org/wiki/Dependency_inversion_principle" target="_blank" rel="noopener noreferrer">Dependency Inversion Principle</a>, which in this case is easier to apply using <a href="https://angular.io/guide/dependency-injection" target="_blank" rel="noopener noreferrer">Angular&#x27;s Dependency Injection framework</a>. However, this theoretical nirvana has not been achieved in the current status of the codebase. And it&#x27;s arguable whether it is desirable, given the cost of adhering strictly to this pattern.</p><p>For example, calendar blocks defined in the <em>block</em> addon import a provider declared in the <em>calendar</em> addon. This violates the dependency inversion principle, but it&#x27;s a sensible decision to avoid complicating the code in excess.</p><p>The end goal is to make each addon as independent as possible, keeping practicality and simplicity in mind.</p><p>In order to distinguish code from each addon, classes will be prefixed with <em>Addon</em> + the addon name. For example, the private files page component declared in <code>core/addons/privatefiles/pages/index/index.ts</code> is called <code>AddonPrivateFilesIndexPage</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="types">types/<a class="hash-link" href="#types" title="Direct link to heading">​</a></h3><p>This folder contains global <a href="https://www.typescriptlang.org/docs/handbook/declaration-files/introduction.html" target="_blank" rel="noopener noreferrer">TypeScript declaration files</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="testing">testing/<a class="hash-link" href="#testing" title="Direct link to heading">​</a></h3><p>This folder contains supporting code for writing tests, but does not contain any tests. To learn where tests are located, read the <a href="#test-files">Test files</a> section.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="theme">theme/<a class="hash-link" href="#theme" title="Direct link to heading">​</a></h3><p>This folder contains general app style sheets. theme.scss is the one that will be included in the html, the rest will be imported by theme or children of this.</p><ul><li><code>theme.scss</code> — This is the main file and contains imports to the rest of the files and 3rd party styles.</li><li><code>theme.light.scss</code> — Includes the desired variables for the light color scheme.</li><li><code>theme.dark.scss</code> — Includes the desired variables for the dark color scheme.</li><li><code>theme.custom.scss</code> — Includes custom styles.</li><li><code>theme.base.scss</code> — Contains global styles, css rules that will apply across the app.</li><li><code>globals.scss</code> — Introduces scss functionality on the the styles and contains imports to:<ul><li><code>globals.custom.scss</code> — Global custom scss variables.</li><li><code>globals.variables.scss</code> — Global scss variables.</li><li><code>globals.mixins.scss</code> — App customised mixins.</li><li><code>globals.mixins.ionic.scss</code> — Imported mixins from ionic.</li></ul></li><li><code>format-text.scss</code> — Contains format-text tag styles.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="assets">assets/<a class="hash-link" href="#assets" title="Direct link to heading">​</a></h3><p>This folder contains source files that are not considered app code. This includes things like fonts, images, and json files; but also external libraries that couldn&#x27;t be installed using npm (for example, h5p and mathjax).</p><p>An exception to this rule is <code>js/iframe-treat-link.js</code>, which is a file that can be considered app code but it is injected directly into iframes without a compilation step.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="file-names">File names<a class="hash-link" href="#file-names" title="Direct link to heading">​</a></h3><p>As a rule of thumb, TypeScript files should be named after the class or interface they export. Given that <a href="https://stackoverflow.com/questions/45962317/why-isnt-export-default-recommended-in-angular" target="_blank" rel="noopener noreferrer">it&#x27;s discouraged to use default exports in Angular applications</a>, it is not obvious what that is for each file. But in most cases it should be fairly easy to see. In situations where there isn&#x27;t a single relevant export, like a file exporting multiple functions, you should use a name that properly reflects the nature of this grouping.</p><p>File names should use <a href="https://en.wikipedia.org/wiki/Letter_case#Kebab_case" target="_blank" rel="noopener noreferrer">kebab case</a> and not include namespaces nor type suffixes. For example, if there is a service declared within <code>core/services/</code> called <code>CoreFoobarService</code>, its file name should be <code>foobar.ts</code>, not <code>core-foobar-service.ts</code>.</p><p>If a folder contains more than one type of TypeScript file, the type of file should be added as a suffix with a dot. For example, the <code>app/</code> folder contains multiple types of classes and that&#x27;s why the file declaring the root component is named <code>app.component.ts</code>. Most components elsewhere don&#x27;t have the <em>.component</em> suffix. The exception to this rule are module and test files, which must always use the <em>.module</em> and <em>.test</em> suffix respectively.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="language-files">Language files<a class="hash-link" href="#language-files" title="Direct link to heading">​</a></h3><p>All feature and addon folders can contain a lang.json file, as well as the <code>core/</code> folder. The JSON file contains all translatable string keys with the current english text. During compilation, those files will be merged into one single file on <code>assets/lang/en.json</code> that will contain the cooked string keys (every key of those files will be prepended with the module prefix).</p><p>An automatic process will create the rest of the language files on the <code>assets/lang/</code> folder based on the Moodle translation platform: <a href="https://lang.moodle.org/" target="_blank" rel="noopener noreferrer">AMOS</a>.</p><p>In order to match existing Moodle language strings with the app strings the app contains a file on the scripts folder called <code>langindex.json</code>. This file contains an indexed array with the cooked string keys of the app, the value of every item is the module (file name) where to find the string in AMOS. If the value contains a slash &#x27;/&#x27; the text before the slash will correspond to the module (file name) and the text after will correspond to the string key on that file. If it does not contain a slash, the string key will be the last part of the cooked string key (splitting using dots .).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-files">Test files<a class="hash-link" href="#test-files" title="Direct link to heading">​</a></h3><p>Tests are found anywhere inside the <code>src/</code> folder, and they will be run as long as they end with <em>.test.ts</em>. As a general rule, they are placed in a folder next to the module responsible for the code being tested. And they mirror the folder structure.</p><p>Here are some examples:</p><ul><li>The utils text service declared in <code>core/services/utils/text.ts</code> is tested in <code>core/services/tests/utils/text.test.ts</code>.</li><li>The init login page declared in <code>core/features/login/pages/init/init.ts</code> is tested in <code>core/features/login/tests/pages/init.test.ts</code>. The test file can be directly under <code>pages/</code> (instead of <code>pages/init/</code>) because the page component is the only file that will be tested for this folder. So it would be unnecessary to have a folder with a single file.</li><li>The root app component declared in <code>app/app.component.ts</code> is tested in <code>app/app.component.test.ts</code>. The test file can live alongside the component because this module doesn&#x27;t have any nested folders.</li></ul><p>In addition to unit test files, there is also a folder at <code>testing/</code> with setup and file utilities shared among all tests.</p><p>Learn more about unit tests in the <a href="#testing">Testing</a> section.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="routing">Routing<a class="hash-link" href="#routing" title="Direct link to heading">​</a></h2><p>All core features and addons can define their own routes, and we can do that in their main module. However, those are loaded when the application starts up, and that won&#x27;t be desirable in most cases. In those situations, we can use <a href="https://angular.io/guide/lazy-loading-ngmodules" target="_blank" rel="noopener noreferrer">lazy loading</a> to defer it until necessary. To encapsulate lazy functionality, we can define a <a href="https://angular.io/guide/module-types#routed" target="_blank" rel="noopener noreferrer">Routed Module</a> named <code>{feature-name}LazyModule</code>. For example, the <em>login</em> core feature defines both a <code>CoreLoginModule</code> and a <code>CoreLoginLazyModule</code>.</p><p>With the <a href="#folders-structure">folders structure</a> we&#x27;re using, it is often the case where different core features or addons need to define routes depending on each other. For example, the <em>mainmenu</em> feature defines the layout and routes for the tabs that are always present at the bottom of the UI. But the home tab is defined in the <em>home</em> feature. In this scenario, it would be possible to just import the pages from the <em>home</em> module within the <em>mainmenu</em>, since both are core features and are allowed to know each other. But that approach can become messy, and what happens if an addon also needs to define a tab (like <em>privatefiles</em>)?</p><p>As described in the <a href="#addons">addons/ folder documentation</a>, the answer to this situation is using the dependency inversion pattern. Instead of the <em>mainmenu</em> depending on anything rendering a tab (<em>home</em>, <em>privatefiles</em>, etc.), we can make those depend on the <em>mainmenu</em> instead. And we can do that using Angular&#x27;s container.</p><p>In order to allow injecting routes from other modules, we create a separated <a href="https://angular.io/guide/module-types#routing-ngmodules" target="_blank" rel="noopener noreferrer">Routing Module</a>. This is the only situation where we&#x27;ll have a dedicated module for routing, in order to reduce the amount of module files in a feature root folder. Any routes that are not injected can be defined directly on their main or lazy module.</p><p>It is often the case that modules using injected routes have a <a href="https://angular.io/api/router/RouterOutlet" target="_blank" rel="noopener noreferrer">RouterOutlet</a>. For that reason, injected routes can be defined either as children or siblings of the main route. The difference between those is that a child will be rendered within the outlet, whilst a sibling will replace the entire page. In order to make this distinction, routing modules accept either an array of routes to use as siblings or an object indicating both types of routes. You can see an example of this in the <code>core/features/courses/courses.module.ts</code> file where some <em>courses</em> routes are injected both as siblings and children into the home routing module.</p><p>This architecture is not limited to feature or addon modules though, page modules can also define routing modules to allow injecting routes. One example is the <code>core/features/mainmenu/pages/home/home-routing.module.ts</code> file. Notice how the accompanying module does not use the <em>-lazy</em> name prefix, that is because page modules are loaded by their respective feature module and they are always lazy, so it isn&#x27;t necessary to make that distinction (if a page is not lazy-loaded it doesn&#x27;t have a dedicated module).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="navigating-between-routes">Navigating between routes<a class="hash-link" href="#navigating-between-routes" title="Direct link to heading">​</a></h3><p>In order to navigate between routes, you should use the <code>CoreNavigator</code> service. It works using Angular&#x27;s router under the hood, and it takes care of all the routing specific to our application.</p><p>Most of the time, you&#x27;ll probably want to use the <code>navigateToSitePath</code> method, because it will take into account the current main menu tab and navigate accordingly. If the call needs to navigate to another site, it&#x27;ll also take care of all the login workflow.</p><p>If you are navigating to a specific route that is not affected by the current site nor the main menu tab, you can use the navigate method directly. This method can also be useful if you want to navigate relative to the current route, for example doing:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CoreNavigator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">navigate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;../&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Other than navigation, this service also contains some helpers that are not available in Angular out of the box. For example, the <code>getRouteParam</code> will get values from multiple sources such as query parameters or route parameters, and it also supports reading non-primitive values.</p><p>Make sure to <a href="https://github.com/moodlehq/moodleapp/blob/integration/src/core/services/navigator.ts" target="_blank" rel="noopener noreferrer">check out the full api</a> to learn more about the <code>CoreNavigator</code> service.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="singletons">Singletons<a class="hash-link" href="#singletons" title="Direct link to heading">​</a></h2><p>The application relies heavily on the <a href="https://en.wikipedia.org/wiki/Singleton_pattern" target="_blank" rel="noopener noreferrer">Singleton design pattern</a>, and there are two types of singletons used throughout the application: Pure singletons and Service singletons.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pure-singletons">Pure Singletons<a class="hash-link" href="#pure-singletons" title="Direct link to heading">​</a></h3><p>Pure singletons, or just &quot;singletons&quot;, are plain Typescript classes whose functionality does not depend on the lifecycle of the application. These normally contain helper or utility methods that enhance existing apis or encapsulate reusable functionality.</p><p>Their implementations usually consist of a collection of static methods (so technically they are not singletons, but in practice this is easier to work with).</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">CoreArray</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">contains</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name constant" style="color:#36acaa">T</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">items</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> item</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> items</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">indexOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!==</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="service-singletons">Service Singletons<a class="hash-link" href="#service-singletons" title="Direct link to heading">​</a></h3><p>Service singletons are instances resolved from the <a href="https://angular.io/guide/hierarchical-dependency-injection" target="_blank" rel="noopener noreferrer">root application injector</a>. In contrast with pure singletons, these are defined as Angular services. In particular, these should be <a href="https://angular.io/guide/singleton-services" target="_blank" rel="noopener noreferrer">singleton services</a>.</p><p>The motivation behind using this pattern to access service instances is improving the development experience (easier auto-imports) and delaying the instantiation of services until they are really needed.</p><p>For example, service A may rely on service B in one method. Using Angular&#x27;s dependency management you would declare service B in the constructor of service A. In this situation, service B would be instantiated whenever service A is instantiated, regardless of the method that uses it being called or not. Given the size of the codebase, this can have a cascading effect detrimental to the performance of the application. With the Service Singleton pattern, service B would only be instantiated when the method that uses it in service A is called.</p><p>To adopt this pattern, the only additional step in the service definition is to use the <code>makeSingleton</code> method (make sure to declare it as provided in root):</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">Injectable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> providedIn</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;root&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">CoreUserService</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> CoreUser </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">makeSingleton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CoreUserService</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This method will create a proxy that will relay all the method calls to the service singleton instance. This proxy can be used like you would use an injected instance of the service. When any method is called, the underlying service will be initialised lazily. If you need to access the actual instance, you can do it via the <code>instance</code> property.</p><p>Since they are normal Angular services under the hood, they can be overridden in other modules. But keep in mind that because they are singletons, they will be replaced everywhere and not just in the module where they are being defined.</p><p>Here&#x27;s one example of this overriding a core Angular service:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyHttpClient</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">HttpClient</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> Http </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">makeSingleton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">HttpClient</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">NgModule</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    providers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> provide</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> HttpClient</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> useClass</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> MyHttpClient </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyModule</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This pattern can be used mostly everywhere, because the underlying system is initialised before the app initialisation begins.</p><p>The exception to this rule is within service constructors, given that we don&#x27;t have absolute control over when Angular will create service instances. For this same reason, code intended to run on application startup must be placed on an <a href="#coreinitializers">initializer</a>. And anything else within a service should be initialised lazily, instead of using the constructor (a general good practice in programming is that constructors shouldn&#x27;t have side-effects).</p><p>In the rare cases where a constructor really needs a dependency, it&#x27;s always possible to fall back to Angular&#x27;s built-in pattern of declaring dependencies in the constructor.</p><p>All the nomenclature can be a bit confusing, so let&#x27;s do a recap:</p><ul><li>Singleton Service: An Angular service that will be instantiated at most once in the entire lifecycle of the application.</li><li>Service Singleton: An instance of a Singleton Service.</li><li>Singleton Proxy: An object that relays method calls to a Service Singleton instance.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="application-lifecycle">Application Lifecycle<a class="hash-link" href="#application-lifecycle" title="Direct link to heading">​</a></h2><p>When the application is launched, the contents of <a href="#indexhtml">index.html</a> are rendered on screen. This file is intentionally concise because all the flare is added by JavaScript, and the splash screen will be covering the application UI until it has fully started. If you are developing in the browser, this will be a blank screen for you given that the splash screen is not available on the web. We are not targeting browsers in production, so it&#x27;s acceptable to have this behaviour during development.</p><p>Before the UI is rendered, the startup process will take place. First, Angular will instantiate <code>AppModule</code> and all the imported modules (features, addons, etc.), and then it will execute the initializers (this includes all the initializers, not only the ones declared under <a href="#coreinitializers">core/initializers/</a>). In our application, we have overridden <a href="https://angular.io/api/core/ApplicationInitStatus" target="_blank" rel="noopener noreferrer">Angular&#x27;s initialisation service</a> to get a hold of the root injector so that we can safely use the <a href="#service-singletons">Service Singletons</a> pattern within initializers. However, we should avoid this pattern within constructors, because those can be called during the instantiation phase.</p><p>Once the application has finished starting up, the router will resolve the active route and the corresponding page component will be rendered. At this point, the splash screen will be hidden and the app is interactive.</p><p><img loading="lazy" alt="A summary of the Application Lifecycle" src="/devdocs/assets/images/application_lifecycle-8d4b8ea7c6b9bd777d26aa93d74c3598.jpg" width="445" height="341" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing-1">Testing<a class="hash-link" href="#testing-1" title="Direct link to heading">​</a></h2><p>There are two types of tests in the mobile app.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unit">Unit<a class="hash-link" href="#unit" title="Direct link to heading">​</a></h3><p>Unit tests are written in JavaScript using <a href="https://jestjs.io/" target="_blank" rel="noopener noreferrer">jest</a>. If you want to create a new one, jest is already configured and you only need to create a file ending with <em>.test.ts</em> within the project. If you&#x27;re going to do so, remember to follow the <a href="#test-files">file location conventions</a>.</p><p>You can run the entire test suite using the npm test command. If you are using VSCode, you can also use the debugger to <a href="https://github.com/moodlehq/moodleapp/blob/integration/.vscode/launch.json" target="_blank" rel="noopener noreferrer">run preconfigured test tasks</a> in the current file or the entire project (using F5 with the default keybindings). This will allow you to use breakpoints and other advanced debugging tools.</p><p>You can write standard jest tests for the most part, but something to keep in mind is that the codebase relies heavily on <a href="#service-singletons">Service Singletons</a>. So you will need to mock any instances that are used in the code you&#x27;re testing.</p><p>You can learn more about this in the <a href="/devdocs/docs/moodleapp/development/testing/unit-testing">Unit testing for the Moodle App</a> page.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="acceptance">Acceptance<a class="hash-link" href="#acceptance" title="Direct link to heading">​</a></h3><p>Acceptance tests are written in <a href="https://en.wikipedia.org/wiki/Cucumber_(software)#Gherkin_language" target="_blank" rel="noopener noreferrer">Gherkin</a> using <a href="/devdocs/docs/moodleapp/development/testing/acceptance-testing">Behat</a>. These are run against the full application with a real Moodle site, so they are more heavy-handed and will take longer to run. But they are also much more realistic than unit tests.</p><p>If you are using <a href="https://github.com/moodlehq/moodle-docker" target="_blank" rel="noopener noreferrer">moodle-docker</a>, you can configure it to <a href="https://github.com/moodlehq/moodle-docker#use-containers-for-running-behat-tests-for-the-mobile-app" target="_blank" rel="noopener noreferrer">run the tests from your local copy of the application</a>. Keep in mind that doing this will run the app on a docker image, and expose the dev server to your machine. So you shouldn&#x27;t be running <code>npm start</code> or any other commands launching a dev server while docker is running, or you&#x27;ll have two instances running and that can cause some problems.</p><p>In order to run your Behat tests, they need to be installed in the Moodle site. You can automate this process by running the <code>npx gulp behat</code> command in the app folder, which will create a local plugin containing your application tests. This uses the environment variables from moodle-docker, if you&#x27;re not using it you can also configure this by setting the <code>MOODLE_APP_BEHAT_PLUGIN_PATH</code> variable. If you want to keep them up to date every time you change the test files, you can run <code>npx gulp watch-behat</code> (this is already done when developing locally, but if you&#x27;re serving the app with moodle-docker you&#x27;ll need to run this from your local machine).</p><p>You can write standard Behat tests for the most part, but there are some steps specific for the Moodle App that you should use instead of the ones for the Moodle LMS.</p><p>You can learn more about this in the <a href="/devdocs/docs/moodleapp/development/testing/acceptance-testing">Acceptance testing for the Moodle App</a> page.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="see-also">See also<a class="hash-link" href="#see-also" title="Direct link to heading">​</a></h2><ul><li><a href="/devdocs/docs/moodleapp/development/scripts/gulp-push">Moodle App Scripts: gulp push</a></li><li><a href="/devdocs/docs/moodleapp/accessibility">Moodle App Accessibility</a></li><li><a href="/devdocs/docs/moodleapp/development/deep-linking">Moodle App Deep Linking</a></li><li><a href="/devdocs/general/development/process/translation/moodleapp">Moodle App Translation</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/devdocs/docs/tags/moodle-app">Moodle App</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/moodle/devdocs/edit/main/docs/moodleapp/development/development-guide.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-06-17T11:03:23.000Z">17/06/2022</time></b> by <b>Andrew Lyons</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/devdocs/docs/moodleapp/development/setup/troubleshooting"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Troubleshooting</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/devdocs/docs/moodleapp/development/plugins-development-guide"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Plugins development guide</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#setting-up-your-development-environment" class="table-of-contents__link toc-highlight">Setting up your development environment</a><ul><li><a href="#editing-code" class="table-of-contents__link toc-highlight">Editing code</a></li><li><a href="#debugging" class="table-of-contents__link toc-highlight">Debugging</a></li><li><a href="#working-with-a-moodle-site" class="table-of-contents__link toc-highlight">Working with a Moodle site</a></li><li><a href="#working-on-native-functionality" class="table-of-contents__link toc-highlight">Working on native functionality</a></li></ul></li><li><a href="#folders-structure" class="table-of-contents__link toc-highlight">Folders structure</a><ul><li><a href="#indexhtml" class="table-of-contents__link toc-highlight">index.html</a></li><li><a href="#maints" class="table-of-contents__link toc-highlight">main.ts</a></li><li><a href="#polyfillsts" class="table-of-contents__link toc-highlight">polyfills.ts</a></li><li><a href="#app" class="table-of-contents__link toc-highlight">app/</a></li><li><a href="#core" class="table-of-contents__link toc-highlight">core/</a></li><li><a href="#addons" class="table-of-contents__link toc-highlight">addons/</a></li><li><a href="#types" class="table-of-contents__link toc-highlight">types/</a></li><li><a href="#testing" class="table-of-contents__link toc-highlight">testing/</a></li><li><a href="#theme" class="table-of-contents__link toc-highlight">theme/</a></li><li><a href="#assets" class="table-of-contents__link toc-highlight">assets/</a></li><li><a href="#file-names" class="table-of-contents__link toc-highlight">File names</a></li><li><a href="#language-files" class="table-of-contents__link toc-highlight">Language files</a></li><li><a href="#test-files" class="table-of-contents__link toc-highlight">Test files</a></li></ul></li><li><a href="#routing" class="table-of-contents__link toc-highlight">Routing</a><ul><li><a href="#navigating-between-routes" class="table-of-contents__link toc-highlight">Navigating between routes</a></li></ul></li><li><a href="#singletons" class="table-of-contents__link toc-highlight">Singletons</a><ul><li><a href="#pure-singletons" class="table-of-contents__link toc-highlight">Pure Singletons</a></li><li><a href="#service-singletons" class="table-of-contents__link toc-highlight">Service Singletons</a></li></ul></li><li><a href="#application-lifecycle" class="table-of-contents__link toc-highlight">Application Lifecycle</a></li><li><a href="#testing-1" class="table-of-contents__link toc-highlight">Testing</a><ul><li><a href="#unit" class="table-of-contents__link toc-highlight">Unit</a></li><li><a href="#acceptance" class="table-of-contents__link toc-highlight">Acceptance</a></li></ul></li><li><a href="#see-also" class="table-of-contents__link toc-highlight">See also</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Moodle</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/devdocs/general/releases">Release notes</a></li><li class="footer__item"><a class="footer__link-item" href="/devdocs/general/projects">Projects</a></li></ul></div><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/devdocs/general/documentation">Developer docs</a></li><li class="footer__item"><a href="https://docs.moodle.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">User docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.moodle.org/dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Legacy docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/devdocs/general/documentation/code-of-conduct">Code of conduct</a></li><li class="footer__item"><a href="https://moodle.org/mod/forum/view.php?id=55" target="_blank" rel="noopener noreferrer" class="footer__link-item">General Developer Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/moodle" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/moodle" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item">
                    <a href="https://www.netlify.com" target="_blank" rel="noreferrer noopener" aria-label="Deploys by Netlify">
                        <img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify" width="114" height="51">
                    </a>
                    </li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
Copyright © 2022 Moodle Pty Ltd. Built with Docusaurus.</div></div></div></footer></div>
<script src="/devdocs/assets/js/runtime~main.108433aa.js"></script>
<script src="/devdocs/assets/js/main.2dbacd86.js"></script>
</body>
</html>