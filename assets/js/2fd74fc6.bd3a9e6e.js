"use strict";(self.webpackChunkdevdocs=self.webpackChunkdevdocs||[]).push([[59668],{49007:function(e,t,o){o.r(t),o.d(t,{assets:function(){return h},contentTitle:function(){return d},default:function(){return k},frontMatter:function(){return m},metadata:function(){return p},toc:function(){return f}});var n,a=o(83117),i=o(80102),l=(o(67294),o(3905)),r=o(13904),s=["components"],m={title:"Forms API",tags:["API","core_form","form","core"]},d=void 0,p={unversionedId:"apis/subsystems/form/index",id:"apis/subsystems/form/index",title:"Forms API",description:"Form are created using the Form API. The Form API supports most standard HTML elements, including checkboxes, radio buttons, text boxes, and so on, adding additional accessibility and security features to them.",source:"@site/docs/apis/subsystems/form/index.md",sourceDirName:"apis/subsystems/form",slug:"/apis/subsystems/form/",permalink:"/devdocs/docs/apis/subsystems/form/",draft:!1,editUrl:"https://github.com/moodle/devdocs/edit/main/docs/apis/subsystems/form/index.md",tags:[{label:"API",permalink:"/devdocs/docs/tags/api"},{label:"core_form",permalink:"/devdocs/docs/tags/core-form"},{label:"form",permalink:"/devdocs/docs/tags/form"},{label:"core",permalink:"/devdocs/docs/tags/core"}],version:"current",lastUpdatedBy:"Andrew Lyons",lastUpdatedAt:1655463803,formattedLastUpdatedAt:"17/06/2022",frontMatter:{title:"Forms API",tags:["API","core_form","form","core"]},sidebar:"docs",previous:{title:"File API internals",permalink:"/devdocs/docs/apis/subsystems/files/internals"},next:{title:"Advanced elements",permalink:"/devdocs/docs/apis/subsystems/form/advanced/advanced-elements"}},h={},f=[{value:"Highlights",id:"highlights",level:2},{value:"Usage",id:"usage",level:2},{value:"Form elements",id:"form-elements",level:2},{value:"Basic form elements",id:"basic-form-elements",level:3},{value:"Advanced form elements",id:"advanced-form-elements",level:3},{value:"Custom form elements",id:"custom-form-elements",level:3},{value:"Commonly used functions",id:"commonly-used-functions",level:2},{value:"add_action_buttons()",id:"add_action_buttons",level:3},{value:"setDefault()",id:"setdefault",level:3},{value:"disabledIf()",id:"disabledif",level:3},{value:"hideIf()",id:"hideif",level:3},{value:"addRule()",id:"addrule",level:3},{value:"addHelpButton()",id:"addhelpbutton",level:3},{value:"setType()",id:"settype",level:3},{value:"disable_form_change_checker()",id:"disable_form_change_checker",level:3},{value:"Other features",id:"other-features",level:3},{value:"Unit testing",id:"unit-testing",level:2},{value:"See also",id:"see-also",level:2}],c=(n="Since",function(e){return console.warn("Component "+n+" was not imported, exported, or provided by MDXProvider as global scope"),(0,l.kt)("div",e)}),u={toc:f};function k(e){var t=e.components,o=(0,i.Z)(e,s);return(0,l.kt)("wrapper",(0,a.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,l.kt)(r.Z,(0,a.Z)({frontMatter:m},void 0!==p?{metadata:p}:{},{mdxType:"MoodlePageBanner"})),(0,l.kt)("p",null,"Form are created using the Form API. The Form API supports most standard HTML elements, including checkboxes, radio buttons, text boxes, and so on, adding additional accessibility and security features to them."),(0,l.kt)("h2",{id:"highlights"},"Highlights"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Tested and optimised for use on major screen-readers like Dragon and JAWS."),(0,l.kt)("li",{parentName:"ul"},"Table-less layout."),(0,l.kt)("li",{parentName:"ul"},"Processes form data securely, with ",(0,l.kt)("inlineCode",{parentName:"li"},"required_param"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"optional_param"),", and session key."),(0,l.kt)("li",{parentName:"ul"},"Supports client-side validation."),(0,l.kt)("li",{parentName:"ul"},"Facility to add Moodle help buttons to forms."),(0,l.kt)("li",{parentName:"ul"},"Support for file repository using the ",(0,l.kt)("a",{parentName:"li",href:"/devdocs/docs/apis/subsystems/files/"},"File API")," ."),(0,l.kt)("li",{parentName:"ul"},"Support for many custom Moodle specific and non-specific form elements."),(0,l.kt)("li",{parentName:"ul"},"Facility for ",(0,l.kt)("a",{parentName:"li",href:"/devdocs/docs/apis/subsystems/form/advanced/repeat-elements"},"repeated elements"),"."),(0,l.kt)("li",{parentName:"ul"},"Facility for form elements in advanced groups")),(0,l.kt)("h2",{id:"usage"},"Usage"),(0,l.kt)("p",null,"The Moodle forms API separates forms into different areas:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"a form definition, which extends the ",(0,l.kt)("inlineCode",{parentName:"li"},"moodleform")," class; and"),(0,l.kt)("li",{parentName:"ol"},"uses of that form.")),(0,l.kt)("p",null,"To create a form in Moodle, you create a class that defines the form, including every form element. Your class must extend the ",(0,l.kt)("inlineCode",{parentName:"p"},"moodleform")," class and overrides the ",(0,l.kt)("a",{parentName:"p",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#definition.28.29"},"definition")," member function to describe the form elements."),(0,l.kt)("details",null,(0,l.kt)("summary",null,"An example of a form definition"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="[path/to/plugin]/classes/form/myform.php"',title:'"[path/to/plugin]/classes/form/myform.php"'},"// moodleform is defined in formslib.php\nrequire_once(\"$CFG->libdir/formslib.php\");\n\nclass simplehtml_form extends moodleform {\n    // Add elements to form.\n    public function definition() {\n        // A reference to the form is stored in $this->form.\n        // A common convention is to store it in a variable, such as `$mform`.\n        $mform = $this->_form; // Don't forget the underscore!\n\n        // Add elements to your form.\n        $mform->addElement('text', 'email', get_string('email'));\n\n        // Set type of element.\n        $mform->setType('email', PARAM_NOTAGS);\n\n        // Default value.\n        $mform->setDefault('email', 'Please enter email');\n    }\n\n    // Custom validation should be added here.\n    function validation($data, $files) {\n        return [];\n    }\n}\n"))),(0,l.kt)("p",null,"Once the form has been defined it can be instantiated elsewhere in Moodle, for example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="[path/to/plugin]/myform.php',title:'"[path/to/plugin]/myform.php'},"\n// Instantiate the myform form from within the plugin.\n$mform = new \\plugintype_pluginname\\form\\myform();\n\n// Form processing and displaying is done here.\nif ($mform->is_cancelled()) {\n    // If there is a cancel element on the form, and it was pressed,\n    // then the `is_cancelled()` function will return true.\n    // You can handle the cancel operation here.\n} else if ($fromform = $mform->get_data()) {\n    // When the form is submitted, and the data is successfully validated,\n    // the `get_data()` function will return the data posted in the form.\n} else {\n    // This branch is executed if the form is submitted but the data doesn't\n    // validate and the form should be redisplayed or on the first display of the form.\n\n    // Set anydefault data (if any).\n    $mform->set_data($toform);\n\n    // Display the form.\n    $mform->display();\n}\n")),(0,l.kt)("p",null,"If you wish to use the form within a block then you should consider using the render method, as demonstrated below:"),(0,l.kt)("p",null,"Note that the render method does the same as the display method, except returning the HTML rather than outputting it to the browser, as with above make sure you've included the file which contains the class for your Moodle form."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"class block_yourblock extends block_base {\n    public function init(){\n        $this->title = 'Your Block';\n    }\n\n    public function get_content(){\n        $this->content = (object) [\n            'text' => '',\n        ];\n\n        $mform = new \\plugintype_pluginname\\form\\myform();\n\n        if ($mform->is_cancelled()) {\n            // If there is a cancel element on the form, and it was pressed,\n            // then the `is_cancelled()` function will return true.\n            // You can handle the cancel operation here.\n        } else if ($fromform = $mform->get_data()) {\n            // When the form is submitted, and the data is successfully validated,\n            // the `get_data()` function will return the data posted in the form.\n        } else {\n            // This branch is executed if the form is submitted but the data doesn't\n            // validate and the form should be redisplayed or on the first display of the form.\n\n            // Set anydefault data (if any).\n            $mform->set_data($toform);\n\n            // Display the form.\n            $this->content->text = $mform->render();\n        }\n\n        return $this->content;\n    }\n}\n")),(0,l.kt)("h2",{id:"form-elements"},"Form elements"),(0,l.kt)("p",null,"Moodle provides a number of basic, and advanced, form elements. These are described in more detail below."),(0,l.kt)("h3",{id:"basic-form-elements"},"Basic form elements"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#button"},"button")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#checkbox"},"checkbox")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#radio"},"radio")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#select"},"select")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#multi-select"},"multi-select")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#password"},"password")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#hidden"},"hidden")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#html"},"html")," - div element"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#static"},"static")," - Display a static text."),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#text"},"text")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#textarea"},"textarea")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#Use_Fieldsets_to_group_Form_Elements"},"header"))),(0,l.kt)("h3",{id:"advanced-form-elements"},"Advanced form elements"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#autocomplete"},"Autocomplete")," - A select box that allows you to start typing to narrow the list of options, or search for results."),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#advcheckbox"},"advcheckbox")," - Advance checkbox"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#float"},"float")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#passwordunmask"},"passwordunmask")," - A password element with option to show the password in plaintext."),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#recaptcha"},"recaptcha")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#selectyesno"},"selectyesno")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#selectwithlink"},"selectwithlink")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#date_selector"},"date_selector")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#date_time_selector"},"date_time_selector")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#duration"},"duration")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#editor"},"editor")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/Using_the_File_API_in_Moodle_forms#filepicker"},"filepicker")," - upload single file"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/Using_the_File_API_in_Moodle_forms#filemanager"},"filemanager")," - upload multiple files"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#tags"},"tags")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#addGroup"},"addGroup")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#modgrade"},"modgrade")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#modvisible"},"modvisible")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#choosecoursefile"},"choosecoursefile")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#grading"},"grading")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#questioncategory"},"questioncategory"))),(0,l.kt)("h3",{id:"custom-form-elements"},"Custom form elements"),(0,l.kt)("p",null,"In addition to the standard form elements, you can register your own custom form elements, for example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"// Register a custom form element.\nMoodleQuickForm::registerElementType(\n    // The custom element is named `course_competency_rule`.\n    // This is the element name used in the `addElement()` function.\n    'course_competency_rule',\n\n    // This is where it's definition is defined.\n    // This does not currently support class auto-loading.\n    \"$CFG->dirroot/$CFG->admin/tool/lp/classes/course_competency_rule_form_element.php\",\n\n    // The class name of the element.\n    'tool_lp_course_competency_rule_form_element'\n);\n\n// Add an instance of the custom form element to your form.\n$mform->addElement(\n    // The name of the custome lement.\n    'course_competency_rule',\n    'competency_rule',\n    get_string('uponcoursemodulecompletion', 'tool_lp'),\n    $options\n);\n")),(0,l.kt)("p",null,"For a real-life example, see:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/moodle/moodle/blob/master/admin/tool/lp/classes/course_competency_rule_form_element.php"},"Custom element definition")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/moodle/moodle/blob/master/admin/tool/lp/lib.php#L157-L161"},"Custom element usage"))),(0,l.kt)("h2",{id:"commonly-used-functions"},"Commonly used functions"),(0,l.kt)("h3",{id:"add_action_buttons"},"add_action_buttons()"),(0,l.kt)("p",null,"Add the standard 'action' buttons to the form - these are the standard Submit, and Cancel buttons on the form."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"public function add_action_buttons(\n    bool $cancel = true,\n    ?string $submitlabel = null\n);\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"The ",(0,l.kt)("inlineCode",{parentName:"li"},"$cancel")," parameter can be used to control whether a cancel button is shown."),(0,l.kt)("li",{parentName:"ul"},"The ",(0,l.kt)("inlineCode",{parentName:"li"},"$submitlabel")," parameter can be used to set the label for the submit button. The default value comes from the ",(0,l.kt)("inlineCode",{parentName:"li"},"savechanges")," string.")),(0,l.kt)("div",{className:"admonition admonition-important alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"important")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"The ",(0,l.kt)("inlineCode",{parentName:"p"},"add_action_buttons")," function is defined on ",(0,l.kt)("inlineCode",{parentName:"p"},"moodlform")," class, and not a part of ",(0,l.kt)("inlineCode",{parentName:"p"},"$this->_form"),", for example:"),(0,l.kt)("pre",{parentName:"div"},(0,l.kt)("code",{parentName:"pre",className:"language-php"},"    public function definition() {\n        // Add your form elements here.\n        $this->_form->addElement(...);\n\n        // When ready, add your action buttons.\n        $this->add_action_buttons();\n    }\n")))),(0,l.kt)("h3",{id:"setdefault"},"setDefault()"),(0,l.kt)("p",null,"The ",(0,l.kt)("a",{parentName:"p",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#setDefault_2"},"setDefault()")," function can be used to set the default value for an element."),(0,l.kt)("h3",{id:"disabledif"},"disabledIf()"),(0,l.kt)("p",null,"The ",(0,l.kt)("a",{parentName:"p",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#disabledIf"},"disabledIf()")," function can be used to conditionally ",(0,l.kt)("em",{parentName:"p"},"disable")," a group of elements, or and individual element depending on the state of other form elements."),(0,l.kt)("h3",{id:"hideif"},"hideIf()"),(0,l.kt)(c,{version:"3.4",mdxType:"Since"}),(0,l.kt)("p",null,"The ",(0,l.kt)("a",{parentName:"p",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#hideIf"},"hideif()")," function can be used to conditionally ",(0,l.kt)("em",{parentName:"p"},"hide")," a group of elements, or and individual element depending on the state of other form elements."),(0,l.kt)("h3",{id:"addrule"},"addRule()"),(0,l.kt)("p",null,"The ",(0,l.kt)("a",{parentName:"p",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#addRule"},"addRule()")," function can be used to define both client-side, and server-side validation rules. For example, this can be used to validate that a text-field is required, and has a type of email."),(0,l.kt)("h3",{id:"addhelpbutton"},"addHelpButton()"),(0,l.kt)("p",null,"The ",(0,l.kt)("a",{parentName:"p",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#addHelpButton"},"addHelpButton()")," function can be used to add a pop-up help button to a form element."),(0,l.kt)("h3",{id:"settype"},"setType()"),(0,l.kt)("p",null,"The ",(0,l.kt)("a",{parentName:"p",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#setType"},"setType()")," function can be used to specify how submitted values are cleaned. The ",(0,l.kt)("inlineCode",{parentName:"p"},"PARAM_*")," constants are used to specify the type of data that will be submitted."),(0,l.kt)("h3",{id:"disable_form_change_checker"},"disable_form_change_checker()"),(0,l.kt)("p",null,"Normally, if a user navigate away from any form and changes have been made, a popup will be shown to the user asking them to confirm that they wish to leave the page and that they may lose data."),(0,l.kt)("p",null,"In some cases this is not the desired behaviour, in which case the ",(0,l.kt)("a",{parentName:"p",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#disable_form_change_checker"},"disable_form_change_checker()")," function can be used to disable the form change checker."),(0,l.kt)("p",null,"For example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"public function definition() {\n    // Your definition goes here.\n\n    // Disable the form change checker for this form.\n    $this->_form->disable_form_change_checker();\n}\n")),(0,l.kt)("h3",{id:"other-features"},"Other features"),(0,l.kt)("p",null,"In some cases you may want to ",(0,l.kt)("a",{parentName:"p",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition#Use_Fieldsets_to_group_Form_Elements"},"group elements")," into collections."),(0,l.kt)("h2",{id:"unit-testing"},"Unit testing"),(0,l.kt)("p",null,"In order to test the processing of submitted form contents in unit tests, the Forms API has a ",(0,l.kt)("inlineCode",{parentName:"p"},"mock_submit()")," function."),(0,l.kt)("p",null,"This method makes the form behave as if the data supplied to it was submitted by the user via the web interface. The data still passes through all form validation, which means that `get_data() will return all of the parsed values, along with any defaults."),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Example usage"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"// Instantiate a form to submit.\n$form = new qtype_multichoice_edit_form(...);\n\n// Fetch the data and then mock the submission of that data.\n$questiondata = test_question_maker::get_question_data('multichoice', 'single');\n$form->mock_submit($questiondata);\n\n// The `get_data()` function will return the validated data, plus any defaults.\n$actualfromform = $form->get_data();\n\n// The resultant data can now be tested against the expected values.\n$expectedfromform = test_question_maker::get_question_form_data('multichoice', 'single');\n$this->assertEquals($expectedfromform, $actualfromform);\n\n// The data can also be saved and tested in the context of the API.\nsave_question($actualfromform);\n$actualquestiondata = question_load_questions(array($actualfromform->id));\n$this->assertEquals($questiondata, $actualquestiondata);\n"))),(0,l.kt)("h2",{id:"see-also"},"See also"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"../.."},"Core APIs")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"/devdocs/docs/apis/subsystems/form/usage"},"lib/formslib.php Usage")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/lib/formslib.php_Form_Definition"},"lib/formslib.php Form Definition")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"/general/development/policies/designing-usable-forms"},"Designing usable forms")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/Fragment"},"Fragment")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://docs.moodle.org/dev/MForm_Modal"},"MForm Modal"))))}k.isMDXComponent=!0}}]);